import{S as q,i as K,s as W,k as Y,K as G,l as j,m as F,L as b,h as w,n as u,p as k,b as J,F as A,N as Q,A as M,T as X,R as Z}from"./index-57d070b8.js";import{a as x}from"./config-331e8422.js";import{s as m}from"./selectAll-237a4934.js";import{o as O}from"./ordinal-7966dd64.js";import{P as S}from"./Paired-3f249ea6.js";import{g as B,a as $}from"./colors-08d4fe23.js";function tt(h){let r,g,l,p,n,d,a,R;return{c(){r=Y("div"),g=G("svg"),l=G("g"),p=G("rect"),n=G("g"),this.h()},l(s){r=j(s,"DIV",{id:!0,class:!0,style:!0});var e=F(r);g=b(e,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0,transform:!0});var _=F(g);l=b(_,"g",{});var v=F(l);p=b(v,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),F(p).forEach(w),v.forEach(w),n=b(_,"g",{id:!0,transform:!0}),F(n).forEach(w),_.forEach(w),e.forEach(w),this.h()},h(){u(p,"x","0"),u(p,"y","0"),u(p,"width",h[0]),u(p,"height",h[1]),u(p,"fill","transparent"),u(n,"id","legendViz"),u(n,"transform","translate(0, 0)"),u(g,"class","inline-block absolute top-0 left-0"),u(g,"viewBox",d="0, 0, "+h[0]+", "+h[1]),u(g,"preserveAspectRatio","xMidYMid meet"),u(g,"transform","translate(0, 0)"),u(r,"id","container"),u(r,"class","inline-block relative align-top overflow-hidden"),k(r,"width",h[0]+"px"),k(r,"height",h[1]+"px"),k(r,"top",h[2]/2+10+"px")},m(s,e){J(s,r,e),A(r,g),A(g,l),A(l,p),A(g,n),h[12](n),a||(R=Q(l,"click",h[11]),a=!0)},p(s,[e]){e&1&&u(p,"width",s[0]),e&2&&u(p,"height",s[1]),e&3&&d!==(d="0, 0, "+s[0]+", "+s[1])&&u(g,"viewBox",d),e&1&&k(r,"width",s[0]+"px"),e&2&&k(r,"height",s[1]+"px"),e&4&&k(r,"top",s[2]/2+10+"px")},i:M,o:M,d(s){s&&w(r),h[12](null),a=!1,R()}}}let f=200;function et(h,r,g){let l;const p=X();let{width:n=0}=r,{height:d=0}=r,{grouping:a}=r,{topOffset:R}=r,s,e=[],_,v,T;const V=i=>{m(".legendaryText_"+a).transition().duration(f).style("opacity",.1),m(".legendaryRect_"+a).transition().duration(f).style("opacity",.1),x("#legendaryText_"+a+"_"+i).transition().duration(f).style("opacity",1),x("#legendaryRect_"+a+"_"+i).transition().duration(f).style("opacity",1)},C=()=>{m(".legendaryText_"+a).transition().duration(f).style("opacity",1),m(".legendaryRect_"+a).transition().duration(f).style("opacity",1)},D=i=>{m(".legendaryText_"+a).transition().duration(f).style("opacity",.1),m(".legendaryRect_"+a).transition().duration(f).style("opacity",.1);for(let y=0;y<i.length;y++)x("#legendaryText_"+a+"_"+i[y]).transition().duration(f).style("opacity",1),x("#legendaryRect_"+a+"_"+i[y]).transition().duration(f).style("opacity",1)},I=()=>{m(".legendaryText_"+a).transition().duration(f).style("opacity",1),m(".legendaryRect_"+a).transition().duration(f).style("opacity",1)},z=()=>{p("reset_mediums",{})},P=i=>{p("highlight_element",{chordGroup:i})},L=i=>{p("restore_elements",{chordGroup:i})},U=i=>{let y;a=="Medium"?(_=O().domain(e).range(S),v=.67,T=.5,y=B(i,t=>t.medium)):(_=O().domain(e).range(S),v=1.1,T=.5,y=B(i,t=>t.death_type));for(let t=0;t<y.length;t++)e.push(y[t][0]);e.sort($),console.log("alright. here we are again."),x(s).append("rect").attr("rx",4).attr("ry",4).attr("width",n*.9).attr("height",d*.85).attr("fill","none").attr("opacity",1).attr("x",n/20-10).attr("y",5).attr("stroke-width",1).attr("stroke","none"),x(s).append("text").attr("x",n/2).attr("y",l).attr("text-anchor","middle").attr("fill","black").classed("legendBigLabel",!0).style("font-size",l).text(a=="Death"?"Means of Death":"Artistic Medium").style("opacity",1).attr("font-weight",700);let E=x(s).append("g").attr("class","legends").selectAll("g").data(e).enter().append("g").on("mouseover",(t,o)=>P(o)).on("mouseleave",(t,o)=>L(o));E.append("rect").attr("rx",4).attr("ry",4).attr("width",n*.67/(e.length*4)).attr("height",d*.15).attr("fill",(t,o)=>_(t)).attr("opacity",1).attr("x",(t,o)=>n/20+(7*l*.5+15)+(n*v/e.length+(7*l*.5+15))*(o>=e.length/2?o-e.length/2:o)+(7*l*.5+15)).attr("y",(t,o)=>o>=e.length/2?d*.4+d*.35:d*.4).attr("stroke-width",1).classed("legendaryRect_"+a,!0).attr("stroke","black").attr("id",(t,o)=>"legendaryRect_"+a+"_"+t),E.append("text").attr("x",(t,o)=>n/20+(7*l*.5+15)+(n*v/e.length+(7*l*.5+15))*(o>=e.length/2?o-e.length/2:o)+(7*l*.5+15)+n*.67/(e.length*4)+7).attr("y",(t,o)=>o>=e.length/2?d*.5-l*.6+d*T:d*.65-l*.6).attr("fill","black").style("text-anchor","center").classed("legendaryText_"+a,!0).style("font-size",(t,o)=>t.length>15?l*.7:l*.8).text(function(t,o){let c=t;return t=="illness"?c="Sickness":t=="heartattack"?c="Heart Attack":t=="alive"?c="Still Alive":t=="natural"?c="Natural Causes":t=="no-mention"?c="Cause Unknown":t=="architect"?c="Architecture":t=="calligrapher"?c="Calligraphy":t=="ceramicist"?c="ceramics":t=="draughtsman"?c="Blueprints":t=="illustrator"?c="Illustrations":t=="muralist"?c="Murals":t=="painter"?c="Paintings":t=="printmaker"?c="Prints":t=="sculptor"?c="Sculptures":t=="photography-film"&&(c="Photos & Film"),c.charAt(0).toUpperCase()+c.slice(1)}).style("opacity",1).attr("id",(t,o)=>"legendaryText_"+a+"_"+t)},H=i=>z();function N(i){Z[i?"unshift":"push"](()=>{s=i,g(3,s)})}return h.$$set=i=>{"width"in i&&g(0,n=i.width),"height"in i&&g(1,d=i.height),"grouping"in i&&g(5,a=i.grouping),"topOffset"in i&&g(2,R=i.topOffset)},h.$$.update=()=>{h.$$.dirty&1&&(l=n/370*6<15?15:n/370*5)},[n,d,R,s,z,a,V,C,D,I,U,H,N]}class ot extends q{constructor(r){super(),K(this,r,et,tt,W,{width:0,height:1,grouping:5,topOffset:2,singleGroupingFocus:6,singleGroupingReFocus:7,multipleGroupingsFocus:8,multipleGroupingsReFocus:9,Initialize:10})}get singleGroupingFocus(){return this.$$.ctx[6]}get singleGroupingReFocus(){return this.$$.ctx[7]}get multipleGroupingsFocus(){return this.$$.ctx[8]}get multipleGroupingsReFocus(){return this.$$.ctx[9]}get Initialize(){return this.$$.ctx[10]}}export{ot as L};
