import{S as te,i as ee,s as re,k as ne,K as Y,q as bt,l as ie,m as z,L as G,h as S,r as kt,n as l,p as ct,b as Rt,F as O,N as at,A as wt,O as oe,T as ae}from"./index-57d070b8.js";import{a as T}from"./config-331e8422.js";import{l as W,f as le,m as At}from"./linear-9a7b9918.js";import{m as se,a as ue,b as fe}from"./axis-000f9faf.js";import{g as Et,a as he}from"./colors-08d4fe23.js";import{o as ce}from"./ordinal-7966dd64.js";import{P as dt}from"./Paired-3f249ea6.js";import{r as de}from"./range-cc563a65.js";import{c as L}from"./constant-b8884f20.js";import{p as St}from"./path-cc2549ba.js";function Ft(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bt(t){this._context=t}Bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function Xt(t){return new Bt(t)}function Ot(t){return t[0]}function zt(t){return t[1]}function Tt(t,r){var n=L(!0),x=null,h=Xt,p=null;t=typeof t=="function"?t:t===void 0?Ot:L(t),r=typeof r=="function"?r:r===void 0?zt:L(r);function _(s){var o,c=(s=Ft(s)).length,a,b=!1,d;for(x==null&&(p=h(d=St())),o=0;o<=c;++o)!(o<c&&n(a=s[o],o,s))===b&&((b=!b)?p.lineStart():p.lineEnd()),b&&p.point(+t(a,o,s),+r(a,o,s));if(d)return p=null,d+""||null}return _.x=function(s){return arguments.length?(t=typeof s=="function"?s:L(+s),_):t},_.y=function(s){return arguments.length?(r=typeof s=="function"?s:L(+s),_):r},_.defined=function(s){return arguments.length?(n=typeof s=="function"?s:L(!!s),_):n},_.curve=function(s){return arguments.length?(h=s,x!=null&&(p=h(x)),_):h},_.context=function(s){return arguments.length?(s==null?x=p=null:p=h(x=s),_):x},_}function Mt(t,r,n){var x=null,h=L(!0),p=null,_=Xt,s=null;t=typeof t=="function"?t:t===void 0?Ot:L(+t),r=typeof r=="function"?r:r===void 0?L(0):L(+r),n=typeof n=="function"?n:n===void 0?zt:L(+n);function o(a){var b,d,A,U=(a=Ft(a)).length,D,q=!1,H,j=new Array(U),k=new Array(U);for(p==null&&(s=_(H=St())),b=0;b<=U;++b){if(!(b<U&&h(D=a[b],b,a))===q)if(q=!q)d=b,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),A=b-1;A>=d;--A)s.point(j[A],k[A]);s.lineEnd(),s.areaEnd()}q&&(j[b]=+t(D,b,a),k[b]=+r(D,b,a),s.point(x?+x(D,b,a):j[b],n?+n(D,b,a):k[b]))}if(H)return s=null,H+""||null}function c(){return Tt().defined(h).curve(_).context(p)}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:L(+a),x=null,o):t},o.x0=function(a){return arguments.length?(t=typeof a=="function"?a:L(+a),o):t},o.x1=function(a){return arguments.length?(x=a==null?null:typeof a=="function"?a:L(+a),o):x},o.y=function(a){return arguments.length?(r=typeof a=="function"?a:L(+a),n=null,o):r},o.y0=function(a){return arguments.length?(r=typeof a=="function"?a:L(+a),o):r},o.y1=function(a){return arguments.length?(n=a==null?null:typeof a=="function"?a:L(+a),o):n},o.lineX0=o.lineY0=function(){return c().x(t).y(r)},o.lineY1=function(){return c().x(t).y(n)},o.lineX1=function(){return c().x(x).y(r)},o.defined=function(a){return arguments.length?(h=typeof a=="function"?a:L(!!a),o):h},o.curve=function(a){return arguments.length?(_=a,p!=null&&(s=_(p)),o):_},o.context=function(a){return arguments.length?(a==null?p=s=null:s=_(p=a),o):p},o}function Yt(t,r){this._context=t,this._t=r}Yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}};function gt(t){return new Yt(t,.5)}function Ct(t){let r,n,x,h,p;return{c(){r=Y("g"),n=Y("line"),x=Y("g"),h=Y("g"),p=Y("g"),this.h()},l(_){r=G(_,"g",{id:!0});var s=z(r);n=G(s,"line",{}),z(n).forEach(S),x=G(s,"g",{id:!0}),z(x).forEach(S),h=G(s,"g",{id:!0}),z(h).forEach(S),p=G(s,"g",{id:!0}),z(p).forEach(S),s.forEach(S),this.h()},h(){l(x,"id","hover-overlay-year"),l(h,"id","hover-overlay-rect"),l(p,"id","hover-overlay-text"),l(r,"id","hover-overlay")},m(_,s){Rt(_,r,s),O(r,n),O(r,x),O(r,h),O(r,p)},d(_){_&&S(r)}}}function ge(t){let r,n,x,h,p,_,s,o,c,a,b,d,A,U,D,q,H,j,k,P,Q,E,F,N,I,Z,$,y,K,M=t[4]&&Ct();return{c(){r=ne("div"),n=Y("svg"),x=Y("g"),h=Y("rect"),p=Y("g"),_=Y("text"),s=bt(`Years
      `),c=Y("text"),a=bt(`Percentage
      `),d=Y("g"),A=Y("g"),D=Y("g"),H=Y("g"),j=Y("path"),k=Y("g"),P=Y("g"),Q=Y("g"),E=Y("rect"),M&&M.c(),this.h()},l(m){r=ie(m,"DIV",{id:!0,class:!0,style:!0});var X=z(r);n=G(X,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var et=z(n);x=G(et,"g",{});var rt=z(x);h=G(rt,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),z(h).forEach(S),rt.forEach(S),p=G(et,"g",{id:!0});var tt=z(p);_=G(tt,"text",{transform:!0,"font-weight":!0,"text-anchor":!0});var lt=z(_);s=kt(lt,`Years
      `),lt.forEach(S),c=G(tt,"text",{transform:!0,"font-weight":!0,"text-anchor":!0});var ot=z(c);a=kt(ot,`Percentage
      `),ot.forEach(S),tt.forEach(S),d=G(et,"g",{id:!0});var V=z(d);A=G(V,"g",{id:!0,transform:!0}),z(A).forEach(S),D=G(V,"g",{id:!0,transform:!0}),z(D).forEach(S),H=G(V,"g",{id:!0});var nt=z(H);j=G(nt,"path",{id:!0}),z(j).forEach(S),nt.forEach(S),k=G(V,"g",{id:!0,transform:!0}),z(k).forEach(S),P=G(V,"g",{id:!0}),z(P).forEach(S),Q=G(V,"g",{id:!0});var it=z(Q);E=G(it,"rect",{id:!0,x:!0,y:!0,width:!0,height:!0,stroke:!0,"stroke-width":!0,fill:!0,opacity:!0}),z(E).forEach(S),it.forEach(S),M&&M.l(V),V.forEach(S),et.forEach(S),X.forEach(S),this.h()},h(){l(h,"x","0"),l(h,"y","0"),l(h,"width",t[0]),l(h,"height",t[1]),l(h,"fill","transparent"),l(_,"transform",o="translate("+t[0]/2+`, 
        `+t[1]*.95+")"),l(_,"font-weight","700"),l(_,"text-anchor","middle"),l(c,"transform",b="translate("+t[0]*.0125+`, 
        `+t[1]/2+") rotate(-90)"),l(c,"font-weight","700"),l(c,"text-anchor","middle"),l(p,"id","axes-titles"),l(A,"id","x-axis"),l(A,"transform",U=`translate(${t[0]*.05}, ${t[1]*.9})`),l(D,"id","y-axis"),l(D,"transform",q=`translate(${t[0]*.05}, ${t[1]*.05})`),l(j,"id","individual-area-chart"),l(H,"id","single-area"),l(k,"id","all-area-chart"),l(k,"transform","translate(0, 0)"),l(P,"id","highlight-area"),l(E,"id","hover-rect-century"),l(E,"x",F=t[2]?t[2](t[5]-t[3]):null),l(E,"y",N=.1*t[1]),l(E,"width",I=t[2]?t[2](t[5]+100)-t[2](t[5]):null),l(E,"height",Z=t[1]*.8),l(E,"stroke","black"),l(E,"stroke-width","4"),l(E,"fill","none"),l(E,"opacity","0"),l(Q,"id","hover-century"),l(d,"id","area-chart"),l(n,"class","inline-block absolute top-0 left-0"),l(n,"viewBox",$="0, 0, "+t[0]+", "+t[1]),l(n,"preserveAspectRatio","xMidYMid meet"),l(r,"id","container"),l(r,"class","inline-block relative align-top overflow-hidden"),ct(r,"width",t[0]+"px"),ct(r,"height",t[1]+"px")},m(m,X){Rt(m,r,X),O(r,n),O(n,x),O(x,h),O(n,p),O(p,_),O(_,s),O(p,c),O(c,a),O(n,d),O(d,A),O(d,D),O(d,H),O(H,j),O(d,k),O(d,P),O(d,Q),O(Q,E),M&&M.m(d,null),y||(K=[at(x,"click",t[23]),at(k,"mousemove",t[24]),at(k,"focus",t[25]),at(k,"mouseout",t[26]),at(k,"blur",t[27])],y=!0)},p(m,X){X[0]&1&&l(h,"width",m[0]),X[0]&2&&l(h,"height",m[1]),X[0]&3&&o!==(o="translate("+m[0]/2+`, 
        `+m[1]*.95+")")&&l(_,"transform",o),X[0]&3&&b!==(b="translate("+m[0]*.0125+`, 
        `+m[1]/2+") rotate(-90)")&&l(c,"transform",b),X[0]&3&&U!==(U=`translate(${m[0]*.05}, ${m[1]*.9})`)&&l(A,"transform",U),X[0]&3&&q!==(q=`translate(${m[0]*.05}, ${m[1]*.05})`)&&l(D,"transform",q),X[0]&44&&F!==(F=m[2]?m[2](m[5]-m[3]):null)&&l(E,"x",F),X[0]&2&&N!==(N=.1*m[1])&&l(E,"y",N),X[0]&36&&I!==(I=m[2]?m[2](m[5]+100)-m[2](m[5]):null)&&l(E,"width",I),X[0]&2&&Z!==(Z=m[1]*.8)&&l(E,"height",Z),m[4]?M||(M=Ct(),M.c(),M.m(d,null)):M&&(M.d(1),M=null),X[0]&3&&$!==($="0, 0, "+m[0]+", "+m[1])&&l(n,"viewBox",$),X[0]&1&&ct(r,"width",m[0]+"px"),X[0]&2&&ct(r,"height",m[1]+"px")},i:wt,o:wt,d(m){m&&S(r),M&&M.d(),y=!1,oe(K)}}}const _e=10;function me(t,r,n){let x,h,p,_;const s=ae();let{width:o=0}=r,{height:c=0}=r,a,b,d,A,U=50,D,q=null,H,j=null,k,P=new Array(k),Q=[];new Array(5);let E,F,N,I,Z,$,y=[],K=!1,M,m,X=[];for(let e=dt.length-1;e>=0;e--)X.push(dt[e]);const et=e=>{let g=new Array(k),u=0;for(var i of P){let f=0,w=_t(i);g[u]=0;let B=[];for(var v of w){B=b.filter(C=>C.artist===v[0]);for(var R of B)R.medium===e&&(g[u]=g[u]+1),f=f+1}g[u]=g[u]/f*100,u=u+1}return g},rt=()=>{let e=0;E=[],F=[];for(var g of y){let w=new Array(k),B=0;for(var u of P){let C=0,J=_t(u);w[B]=0;let xt=[];for(var i of J){xt=b.filter($t=>$t.artist===i[0]);for(var v of xt)v.medium===g&&(w[B]=w[B]+1),C=C+1}C&&(w[B]=w[B]/C*100),B=B+1}E[e]=w,e=e+1}F={...E};for(var R=0;R<y.length-1;R++)for(var f=0;f<P.length;f++)F[R+1][f]=E[R][f]+E[R+1][f]},tt=()=>{T("#individual-area-chart").attr("opacity","0.0");var e=W().domain([0,k]).range([.05*o,o*.95]),g=W().domain([0,100]).range([c*.9,.1*c]);const u=Mt().x(f=>e(f.x-d)).y1(f=>g(f.y)).y0(f=>g(f.prev)).curve(gt).context(null);let i=0;for(var v of y){let f=F[y.length-1-i],w=[];if(i<y.length-1)w=F[y.length-1-i-1];else for(var R=0;R<k;R++)w[R]=0;i=i+1,N=[];for(let C=0;C<P.length;C++){const J={x:P[C],y:f[C],prev:w[C]};N.push(J)}let B="area-chart-"+(y.length-i).toString();T("#all-area-chart").append("path").attr("id",B).datum(N).attr("d",u).style("fill",X[i-1]).attr("opacity","1.0")}},lt=e=>{let g=y.indexOf(e);console.log(g);let u=et(e);var i=W().domain([0,k]).range([.05*o,o*.95]),v=W().domain([0,100]).range([c*.9,.1*c]);const R=Mt().x(f=>i(f.x-d)).y1(f=>v(f.y)).y0(c*.9).curve(gt).context(null);N=[];for(let f=0;f<P.length;f++){const w={x:P[f],y:u[f]};N.push(w)}st(),T("#individual-area-chart").datum(N).attr("d",R).transition().duration(1e3).attr("fill",f=>mt(y.indexOf(e))).attr("opacity","1.0")},ot=e=>{let g=y.indexOf(e);console.log("idx",g);var u=W().domain([0,k]).range([.05*o,o*.95]),i=W().domain([0,100]).range([c*.9,.1*c]);const v=Tt().x((C,J)=>u(C.x-d)).y(C=>i(C.y)).curve(gt).context(null);T("#highlight-area").append("line").attr("id","#highlight-border-left").attr("x1",u(0)).attr("y1",i(E[g][0])).attr("x2",u(0)).attr("y2",g?i(E[g-1][0]):c*.05).attr("fill","none").style("stroke","black").style("stroke-width","1").attr("opacity","1.0"),T("#highlight-area").append("line").attr("id","#highlight-border-right").attr("x1",u(k-1)).attr("y1",i(E[g][k-1])).attr("x2",u(k-1)).attr("y2",g?i(E[g-1][k-1]):c*.05).attr("fill","none").style("stroke","black").style("stroke-width","1").attr("opacity","1.0");let R=F[g];N=[];for(let C=0;C<P.length;C++){const J={x:P[C],y:R[C]};N.push(J)}if(T("#highlight-area").append("path").attr("id","#highlight-border-up").datum(N).attr("d",v).attr("fill","none").style("stroke","black").style("stroke-width","1").attr("opacity","1.0"),g!==0)R=F[g-1];else for(var f=0;f<R.length;f++)R[f]=0;N=[];for(let C=0;C<P.length;C++){const J={x:P[C],y:R[C]};N.push(J)}T("#highlight-area").append("path").attr("id","#highlight-border-bottom").datum(N).attr("d",v).attr("fill","none").style("stroke","black").style("stroke-width","1").attr("opacity","1.0");let w=0;for(var e of y){let J="#area-chart-"+w;T(J).attr("opacity","0.3"),w=w+1}let B="#area-chart-"+g;T(B).attr("opacity","1.0")},V=()=>{let e=0;for(var g of y){let u="#area-chart-"+e;T(u).attr("opacity","1.0"),e=e+1}},nt=e=>{n(4,h=!0);var g=W().domain([0,k]).range([.05*o,o*.95]);W().domain([0,100]).range([.9*c,.1*c]);let u=Math.floor(g.invert(e.offsetX));T("#hover-overlay").select("line").attr("x1",e.offsetX).attr("x2",e.offsetX).attr("y1",c*.1).attr("y2",c*.9).attr("stroke","black").attr("stroke-width","2"),T("#hover-overlay-rect").selectAll("rect").data(i=>{if(M)return[m];for(var v of y)y.indexOf(v);return y.filter(f=>{let w=y.indexOf(f),B=0;if(w!==0?B=F[w][u]-F[w-1][u]:B=F[0][u],B)return f}).reverse()}).join("rect").attr("x",i=>e.offsetX<o/2?e.offsetX+I-10:e.offsetX-210).attr("y",(i,v)=>I*v+I/3+c*.1).attr("width",200).attr("height",I).attr("rx","10").style("fill","white").style("opacity","0.8"),T("#hover-overlay-text").selectAll("text").data(i=>{if(M)return[m];for(var v of y)y.indexOf(v);return y.filter(f=>{let w=y.indexOf(f),B=0;if(w!==0?B=F[w][u]-F[w-1][u]:B=F[0][u],B)return f}).reverse()}).join("text").text(i=>{let v=i;i=="architect"?v="Architecture":i=="calligrapher"?v="Calligraphy":i=="ceramicist"?v="ceramics":i=="draughtsman"?v="Blueprints":i=="illustrator"?v="Illustrations":i=="muralist"?v="Murals":i=="painter"?v="Paintings":i=="printmaker"?v="Prints":i=="sculptor"?v="Sculptures":i=="photography-film"&&(v="Photos & Film");let R="",f=y.indexOf(i),w=0;return f!==0?w=F[f][u]-F[f-1][u]:w=F[0][u],R=R+`${le(".3s")(w)}% `+v.charAt(0).toUpperCase()+v.slice(1),R}).attr("x",i=>e.offsetX<o/2?e.offsetX+I:e.offsetX-200).attr("y",(i,v)=>I*v+I+c*.1).attr("fill",(i,v)=>(y.indexOf(i),mt(y.indexOf(i)))).style("text-shadow","1px 0 0 black,0 1px 0 black,-1px 0 0 black,0 -1px 0 black").style("font-family","sans-serif").style("font-size","1.2em"),T("#hover-overlay-year").selectAll("text").data([0]).join("text").text(i=>`Exact Year: ${u+d}`).attr("x",i=>e.offsetX<o/2?e.offsetX+I:e.offsetX-200).attr("y",i=>c*.1-I/3).attr("fill",(i,v)=>"black").style("font-family","sans-serif").style("font-size","1.3em")},it=e=>{(e.offsetX<=.05*o||e.offsetX>.95*o||e.offsetY>c*.9||e.offsetY<c*.05)&&(console.log("outttt"),console.log(e.offsetX,e.offsetY),n(4,h=!1))},_t=e=>Q.filter(([,u])=>u.length>1?u[0].year<=e&&u[1].year>e:u[0].year<=e),mt=e=>e>=0&&e<y.length?$(y[e]):"black",st=()=>{T("#all-area-chart").selectAll("*").remove()},ut=()=>{T("#highlight-area").selectAll("*").attr("opacity","0.0")},ft=()=>{n(21,D=W().domain([d,A]).range([0,o*.9])),q=ue(D).tickFormat(e=>Number(e)%_e===0?String(e):"").ticks((A-d)/U),T("#x-axis").call(q),n(22,H=W().domain([0,100]).range([c*.85,c*.05])),j=fe(H),T("#y-axis").call(j)},Gt=e=>{n(2,Z=W().domain([0,k]).range([.05*o,.95*o])),T("#hover-rect-century").attr("opacity","1").transition().duration(1e3).attr("x",Z(+e-d))},pt=()=>{T("#hover-rect-century").attr("opacity","0")},Pt=e=>{console.log("Chord medium was highlighted on chord: ",e),n(4,h=!1),!M&&!K&&ot(e)},Nt=()=>{n(4,h=!0),console.log("Chord medium is no longer highlighted on chord."),!M&&!K&&(ut(),V())},Lt=(e,g)=>{console.log("Chord ribbon was highlighted on chord for medium: ",e," and century: ",g),n(4,h=!1),!M&&!K&&ot(e)},Dt=()=>{console.log("That ribbon is no longer highlighted..."),n(4,h=!0),!M&&!K&&(ut(),V())},It=e=>{console.log("Chord says to zoom to this century: ",e),K?e===_&&(K=!K):K=!0,_=e,K?(n(3,d=+e),A=+e+100,A>x&&(A=x),U=10,ht(A,d),st(),ut(),pt(),ft(),rt(),tt()):(U=50,st(),vt())},Ht=e=>{M?m===e&&(M=!M):M=!0,m=e,M?(st(),ut(),A=+At(a,g=>g.year),n(3,d=1378),ht(A,d),ft(),lt(e)):vt()},Ut=e=>{console.log("User highlighted button for century: ",e),n(4,h=!1),Gt(e)},qt=()=>{console.log("User is no longer highlighting century button..."),n(4,h=!0),pt()},ht=(e,g)=>{k=e-g,P=[];for(let u=0;u<k;u++)P[u]=g+u},yt=()=>{s("reset_mediums",{})},vt=()=>{n(3,d=1378),A=2022,ht(A,d),ft(),rt(),tt()},jt=()=>{console.log("Reset")},Kt=(e,g)=>{n(19,a=e),n(20,b=g),Q=Et(a,i=>i.artist),de(y.length).reverse(),n(3,d=+se(e,i=>i.year)),n(3,d=1378),A=+At(e,i=>i.year),x=A;let u=Et(g,i=>i.medium);for(let i=0;i<u.length;i++)y.push(u[i][0]);y.sort(he),$=ce().domain(y).range(dt),ht(A,d),ft(),rt(),tt()},Vt=e=>yt(),Wt=e=>nt(e),Jt=e=>nt(e),Qt=e=>it(e),Zt=e=>it(e);return t.$$set=e=>{"width"in e&&n(0,o=e.width),"height"in e&&n(1,c=e.height)},t.$$.update=()=>{t.$$.dirty[0]&524288,t.$$.dirty[0]&1048576,t.$$.dirty[0]&2097152,t.$$.dirty[0]&4194304,t.$$.dirty[0]&4},n(3,d=0),A=2100,x=0,E=[],F=[],N=[],I=30,n(4,h=!0),n(5,p=0),_="0",[o,c,Z,d,h,p,nt,it,yt,Pt,Nt,Lt,Dt,It,Ht,Ut,qt,jt,Kt,a,b,D,H,Vt,Wt,Jt,Qt,Zt]}class Ce extends te{constructor(r){super(),ee(this,r,me,ge,re,{width:0,height:1,chordMedGroupFocus:9,chordMedGroupReFocus:10,chordMedRibbonFocus:11,chordMedRibbonReFocus:12,chordMedButtonClick:13,chordArcMedButtonClick:14,chordMedButtonFocus:15,chordMedButtonReFocus:16,ResetAreaChart:17,Initialize:18},null,[-1,-1,-1])}get chordMedGroupFocus(){return this.$$.ctx[9]}get chordMedGroupReFocus(){return this.$$.ctx[10]}get chordMedRibbonFocus(){return this.$$.ctx[11]}get chordMedRibbonReFocus(){return this.$$.ctx[12]}get chordMedButtonClick(){return this.$$.ctx[13]}get chordArcMedButtonClick(){return this.$$.ctx[14]}get chordMedButtonFocus(){return this.$$.ctx[15]}get chordMedButtonReFocus(){return this.$$.ctx[16]}get ResetAreaChart(){return this.$$.ctx[17]}get Initialize(){return this.$$.ctx[18]}}export{Ce as A};
