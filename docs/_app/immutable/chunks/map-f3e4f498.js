import{S as Yr,i as Xr,s as vr,k as Mn,K as R,q as _e,a as Zr,l as Pn,m as L,L as N,r as ge,h as w,c as Hr,n as u,p as we,b as ee,F as I,N as $e,f as We,g as dr,t as dt,d as mr,U as qr,e as De,H as rt,J as Fr,R as Ln,O as Wr,u as It}from"./index-b057db88.js";import{s as mt}from"./config-331e8422.js";import{S as Ur,G as ze,a as Ce,A as O,M as ft,T as Xe}from"./helpers-2dd99694.js";import{f as Rn}from"./index-b7cd0cbc.js";import{r as qe}from"./range-cc563a65.js";import{s as Nn}from"./selectAll-237a4934.js";import{m as Vr,l as Jr}from"./linear-9a7b9918.js";import{c as Kr,g as Qr}from"./colors-08d4fe23.js";import{p as $r}from"./path-cc2549ba.js";import{e as An}from"./math-4b42103b.js";class be{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const l=n[i],s=t+l,c=Math.abs(t)<Math.abs(l)?t-(s-l):l-(s-t);c&&(n[r++]=c),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,l,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,l=i-(s-r),!l););n>0&&(l<0&&t[n-1]<0||l>0&&t[n-1]>0)&&(i=l*2,r=s+i,i==r-s&&(s=r))}return s}}function*jr(e){for(const t of e)yield*t}function yr(e){return Array.from(jr(e))}var F=1e-6,xr=1e-12,q=Math.PI,ve=q/2,In=q/4,me=q*2,Ie=180/q,pe=q/180,Q=Math.abs,ei=Math.atan,ot=Math.atan2,$=Math.cos,ct=Math.ceil,j=Math.sin,ti=Math.sign||function(e){return e>0?1:e<0?-1:0},Ye=Math.sqrt;function ni(e){return e>1?0:e<-1?q:Math.acos(e)}function lt(e){return e>1?ve:e<-1?-ve:Math.asin(e)}function de(){}function yt(e,t){e&&Bn.hasOwnProperty(e.type)&&Bn[e.type](e,t)}var Tn={Feature:function(e,t){yt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yt(n[r].geometry,t)}},Bn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ot(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ot(n[r],t,0)},Polygon:function(e,t){Gn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Gn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yt(n[r],t)}};function Ot(e,t,n){var r=-1,i=e.length-n,l;for(t.lineStart();++r<i;)l=e[r],t.point(l[0],l[1],l[2]);t.lineEnd()}function Gn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Ot(e[n],t,1);t.polygonEnd()}function He(e,t){e&&Tn.hasOwnProperty(e.type)?Tn[e.type](e,t):yt(e,t)}function Yt(e){return[ot(e[1],e[0]),lt(e[2])]}function Ue(e){var t=e[0],n=e[1],r=$(n);return[r*$(t),r*j(t),j(n)]}function ht(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Et(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Tt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Xt(e){var t=Ye(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Zt(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ht(e,t){return[Q(e)>q?e+Math.round(-e/me)*me:e,t]}Ht.invert=Ht;function ri(e,t,n){return(e%=me)?t||n?Zt(zn(e),Cn(t,n)):zn(e):t||n?Cn(t,n):Ht}function Dn(e){return function(t,n){return t+=e,[t>q?t-me:t<-q?t+me:t,n]}}function zn(e){var t=Dn(e);return t.invert=Dn(-e),t}function Cn(e,t){var n=$(e),r=j(e),i=$(t),l=j(t);function s(c,m){var p=$(m),o=$(c)*p,a=j(c)*p,f=j(m),v=f*n+o*r;return[ot(a*i-v*l,o*n-f*r),lt(v*i+a*l)]}return s.invert=function(c,m){var p=$(m),o=$(c)*p,a=j(c)*p,f=j(m),v=f*i-a*l;return[ot(a*i+f*l,o*n+v*r),lt(v*n-o*r)]},s}function ii(e,t,n,r,i,l){if(!!n){var s=$(t),c=j(t),m=r*n;i==null?(i=t+r*me,l=t-m/2):(i=bn(s,i),l=bn(s,l),(r>0?i<l:i>l)&&(i+=r*me));for(var p,o=i;r>0?o>l:o<l;o-=m)p=Yt([s,-c*$(o),-c*j(o)]),e.point(p[0],p[1])}}function bn(e,t){t=Ue(t),t[0]-=e,Xt(t);var n=ni(-t[1]);return((-t[2]<0?-n:n)+me-F)%me}function Er(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:de,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function vt(e,t){return Q(e[0]-t[0])<F&&Q(e[1]-t[1])<F}function _t(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function kr(e,t,n,r,i){var l=[],s=[],c,m;if(e.forEach(function(g){if(!((h=g.length-1)<=0)){var h,d=g[0],_=g[h],k;if(vt(d,_)){if(!d[2]&&!_[2]){for(i.lineStart(),c=0;c<h;++c)i.point((d=g[c])[0],d[1]);i.lineEnd();return}_[0]+=2*F}l.push(k=new _t(d,g,null,!0)),s.push(k.o=new _t(d,null,k,!1)),l.push(k=new _t(_,g,null,!1)),s.push(k.o=new _t(_,null,k,!0))}}),!!l.length){for(s.sort(t),On(l),On(s),c=0,m=s.length;c<m;++c)s[c].e=n=!n;for(var p=l[0],o,a;;){for(var f=p,v=!0;f.v;)if((f=f.n)===p)return;o=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(v)for(c=0,m=o.length;c<m;++c)i.point((a=o[c])[0],a[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(v)for(o=f.p.z,c=o.length-1;c>=0;--c)i.point((a=o[c])[0],a[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,o=f.z,v=!v}while(!f.v);i.lineEnd()}}}function On(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Bt(e){return Q(e[0])<=q?e[0]:ti(e[0])*((Q(e[0])+q)%me-q)}function oi(e,t){var n=Bt(t),r=t[1],i=j(r),l=[j(n),-$(n),0],s=0,c=0,m=new be;i===1?r=ve+F:i===-1&&(r=-ve-F);for(var p=0,o=e.length;p<o;++p)if(!!(f=(a=e[p]).length))for(var a,f,v=a[f-1],g=Bt(v),h=v[1]/2+In,d=j(h),_=$(h),k=0;k<f;++k,g=M,d=B,_=A,v=y){var y=a[k],M=Bt(y),P=y[1]/2+In,B=j(P),A=$(P),C=M-g,D=C>=0?1:-1,Y=D*C,T=Y>q,S=d*B;if(m.add(ot(S*D*j(Y),_*A+S*$(Y))),s+=T?C+D*me:C,T^g>=n^M>=n){var z=Et(Ue(v),Ue(y));Xt(z);var X=Et(l,z);Xt(X);var E=(T^C>=0?-1:1)*lt(X[2]);(r>E||r===E&&(z[0]||z[1]))&&(c+=T^C>=0?1:-1)}}return(s<-F||s<F&&m<-xr)^c&1}function wr(e,t,n,r){return function(i){var l=t(i),s=Er(),c=t(s),m=!1,p,o,a,f={point:v,lineStart:h,lineEnd:d,polygonStart:function(){f.point=_,f.lineStart=k,f.lineEnd=y,o=[],p=[]},polygonEnd:function(){f.point=v,f.lineStart=h,f.lineEnd=d,o=yr(o);var M=oi(p,r);o.length?(m||(i.polygonStart(),m=!0),kr(o,ui,M,n,i)):M&&(m||(i.polygonStart(),m=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),m&&(i.polygonEnd(),m=!1),o=p=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function v(M,P){e(M,P)&&i.point(M,P)}function g(M,P){l.point(M,P)}function h(){f.point=g,l.lineStart()}function d(){f.point=v,l.lineEnd()}function _(M,P){a.push([M,P]),c.point(M,P)}function k(){c.lineStart(),a=[]}function y(){_(a[0][0],a[0][1]),c.lineEnd();var M=c.clean(),P=s.result(),B,A=P.length,C,D,Y;if(a.pop(),p.push(a),a=null,!!A){if(M&1){if(D=P[0],(C=D.length-1)>0){for(m||(i.polygonStart(),m=!0),i.lineStart(),B=0;B<C;++B)i.point((Y=D[B])[0],Y[1]);i.lineEnd()}return}A>1&&M&2&&P.push(P.pop().concat(P.shift())),o.push(P.filter(li))}}return f}}function li(e){return e.length>1}function ui(e,t){return((e=e.x)[0]<0?e[1]-ve-F:ve-e[1])-((t=t.x)[0]<0?t[1]-ve-F:ve-t[1])}const Yn=wr(function(){return!0},ai,fi,[-q,-ve]);function ai(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(l,s){var c=l>0?q:-q,m=Q(l-t);Q(m-q)<F?(e.point(t,n=(n+s)/2>0?ve:-ve),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(l,n),i=0):r!==c&&m>=q&&(Q(t-r)<F&&(t-=r*F),Q(l-c)<F&&(l-=c*F),n=si(t,n,l,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),i=0),e.point(t=l,n=s),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function si(e,t,n,r){var i,l,s=j(e-n);return Q(s)>F?ei((j(t)*(l=$(r))*j(n)-j(r)*(i=$(t))*j(e))/(i*l*s)):(t+r)/2}function fi(e,t,n,r){var i;if(e==null)i=n*ve,r.point(-q,i),r.point(0,i),r.point(q,i),r.point(q,0),r.point(q,-i),r.point(0,-i),r.point(-q,-i),r.point(-q,0),r.point(-q,i);else if(Q(e[0]-t[0])>F){var l=e[0]<t[0]?q:-q;i=n*l/2,r.point(-l,i),r.point(0,i),r.point(l,i)}else r.point(t[0],t[1])}function ci(e){var t=$(e),n=6*pe,r=t>0,i=Q(t)>F;function l(o,a,f,v){ii(v,e,n,f,o,a)}function s(o,a){return $(o)*$(a)>t}function c(o){var a,f,v,g,h;return{lineStart:function(){g=v=!1,h=1},point:function(d,_){var k=[d,_],y,M=s(d,_),P=r?M?0:p(d,_):M?p(d+(d<0?q:-q),_):0;if(!a&&(g=v=M)&&o.lineStart(),M!==v&&(y=m(a,k),(!y||vt(a,y)||vt(k,y))&&(k[2]=1)),M!==v)h=0,M?(o.lineStart(),y=m(k,a),o.point(y[0],y[1])):(y=m(a,k),o.point(y[0],y[1],2),o.lineEnd()),a=y;else if(i&&a&&r^M){var B;!(P&f)&&(B=m(k,a,!0))&&(h=0,r?(o.lineStart(),o.point(B[0][0],B[0][1]),o.point(B[1][0],B[1][1]),o.lineEnd()):(o.point(B[1][0],B[1][1]),o.lineEnd(),o.lineStart(),o.point(B[0][0],B[0][1],3)))}M&&(!a||!vt(a,k))&&o.point(k[0],k[1]),a=k,v=M,f=P},lineEnd:function(){v&&o.lineEnd(),a=null},clean:function(){return h|(g&&v)<<1}}}function m(o,a,f){var v=Ue(o),g=Ue(a),h=[1,0,0],d=Et(v,g),_=ht(d,d),k=d[0],y=_-k*k;if(!y)return!f&&o;var M=t*_/y,P=-t*k/y,B=Et(h,d),A=pt(h,M),C=pt(d,P);Tt(A,C);var D=B,Y=ht(A,D),T=ht(D,D),S=Y*Y-T*(ht(A,A)-1);if(!(S<0)){var z=Ye(S),X=pt(D,(-Y-z)/T);if(Tt(X,A),X=Yt(X),!f)return X;var E=o[0],b=a[0],W=o[1],te=a[1],U;b<E&&(U=E,E=b,b=U);var he=b-E,ne=Q(he-q)<F,le=ne||he<F;if(!ne&&te<W&&(U=W,W=te,te=U),le?ne?W+te>0^X[1]<(Q(X[0]-E)<F?W:te):W<=X[1]&&X[1]<=te:he>q^(E<=X[0]&&X[0]<=b)){var re=pt(D,(-Y+z)/T);return Tt(re,A),[X,Yt(re)]}}}function p(o,a){var f=r?e:q-e,v=0;return o<-f?v|=1:o>f&&(v|=2),a<-f?v|=4:a>f&&(v|=8),v}return wr(s,c,l,r?[0,-e]:[-q,e-q])}function hi(e,t,n,r,i,l){var s=e[0],c=e[1],m=t[0],p=t[1],o=0,a=1,f=m-s,v=p-c,g;if(g=n-s,!(!f&&g>0)){if(g/=f,f<0){if(g<o)return;g<a&&(a=g)}else if(f>0){if(g>a)return;g>o&&(o=g)}if(g=i-s,!(!f&&g<0)){if(g/=f,f<0){if(g>a)return;g>o&&(o=g)}else if(f>0){if(g<o)return;g<a&&(a=g)}if(g=r-c,!(!v&&g>0)){if(g/=v,v<0){if(g<o)return;g<a&&(a=g)}else if(v>0){if(g>a)return;g>o&&(o=g)}if(g=l-c,!(!v&&g<0)){if(g/=v,v<0){if(g>a)return;g>o&&(o=g)}else if(v>0){if(g<o)return;g<a&&(a=g)}return o>0&&(e[0]=s+o*f,e[1]=c+o*v),a<1&&(t[0]=s+a*f,t[1]=c+a*v),!0}}}}}var je=1e9,gt=-je;function pi(e,t,n,r){function i(p,o){return e<=p&&p<=n&&t<=o&&o<=r}function l(p,o,a,f){var v=0,g=0;if(p==null||(v=s(p,a))!==(g=s(o,a))||m(p,o)<0^a>0)do f.point(v===0||v===3?e:n,v>1?r:t);while((v=(v+a+4)%4)!==g);else f.point(o[0],o[1])}function s(p,o){return Q(p[0]-e)<F?o>0?0:3:Q(p[0]-n)<F?o>0?2:1:Q(p[1]-t)<F?o>0?1:0:o>0?3:2}function c(p,o){return m(p.x,o.x)}function m(p,o){var a=s(p,1),f=s(o,1);return a!==f?a-f:a===0?o[1]-p[1]:a===1?p[0]-o[0]:a===2?p[1]-o[1]:o[0]-p[0]}return function(p){var o=p,a=Er(),f,v,g,h,d,_,k,y,M,P,B,A={point:C,lineStart:S,lineEnd:z,polygonStart:Y,polygonEnd:T};function C(E,b){i(E,b)&&o.point(E,b)}function D(){for(var E=0,b=0,W=v.length;b<W;++b)for(var te=v[b],U=1,he=te.length,ne=te[0],le,re,ue=ne[0],ae=ne[1];U<he;++U)le=ue,re=ae,ne=te[U],ue=ne[0],ae=ne[1],re<=r?ae>r&&(ue-le)*(r-re)>(ae-re)*(e-le)&&++E:ae<=r&&(ue-le)*(r-re)<(ae-re)*(e-le)&&--E;return E}function Y(){o=a,f=[],v=[],B=!0}function T(){var E=D(),b=B&&E,W=(f=yr(f)).length;(b||W)&&(p.polygonStart(),b&&(p.lineStart(),l(null,null,1,p),p.lineEnd()),W&&kr(f,c,E,l,p),p.polygonEnd()),o=p,f=v=g=null}function S(){A.point=X,v&&v.push(g=[]),P=!0,M=!1,k=y=NaN}function z(){f&&(X(h,d),_&&M&&a.rejoin(),f.push(a.result())),A.point=C,M&&o.lineEnd()}function X(E,b){var W=i(E,b);if(v&&g.push([E,b]),P)h=E,d=b,_=W,P=!1,W&&(o.lineStart(),o.point(E,b));else if(W&&M)o.point(E,b);else{var te=[k=Math.max(gt,Math.min(je,k)),y=Math.max(gt,Math.min(je,y))],U=[E=Math.max(gt,Math.min(je,E)),b=Math.max(gt,Math.min(je,b))];hi(te,U,e,t,n,r)?(M||(o.lineStart(),o.point(te[0],te[1])),o.point(U[0],U[1]),W||o.lineEnd(),B=!1):W&&(o.lineStart(),o.point(E,b),B=!1)}k=E,y=b,M=W}return A}}function Xn(e,t,n){var r=qe(e,t-F,n).concat(t);return function(i){return r.map(function(l){return[i,l]})}}function Zn(e,t,n){var r=qe(e,t-F,n).concat(t);return function(i){return r.map(function(l){return[l,i]})}}function _i(){var e,t,n,r,i,l,s,c,m=10,p=m,o=90,a=360,f,v,g,h,d=2.5;function _(){return{type:"MultiLineString",coordinates:k()}}function k(){return qe(ct(r/o)*o,n,o).map(g).concat(qe(ct(c/a)*a,s,a).map(h)).concat(qe(ct(t/m)*m,e,m).filter(function(y){return Q(y%o)>F}).map(f)).concat(qe(ct(l/p)*p,i,p).filter(function(y){return Q(y%a)>F}).map(v))}return _.lines=function(){return k().map(function(y){return{type:"LineString",coordinates:y}})},_.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(h(s).slice(1),g(n).reverse().slice(1),h(c).reverse().slice(1))]}},_.extent=function(y){return arguments.length?_.extentMajor(y).extentMinor(y):_.extentMinor()},_.extentMajor=function(y){return arguments.length?(r=+y[0][0],n=+y[1][0],c=+y[0][1],s=+y[1][1],r>n&&(y=r,r=n,n=y),c>s&&(y=c,c=s,s=y),_.precision(d)):[[r,c],[n,s]]},_.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],l=+y[0][1],i=+y[1][1],t>e&&(y=t,t=e,e=y),l>i&&(y=l,l=i,i=y),_.precision(d)):[[t,l],[e,i]]},_.step=function(y){return arguments.length?_.stepMajor(y).stepMinor(y):_.stepMinor()},_.stepMajor=function(y){return arguments.length?(o=+y[0],a=+y[1],_):[o,a]},_.stepMinor=function(y){return arguments.length?(m=+y[0],p=+y[1],_):[m,p]},_.precision=function(y){return arguments.length?(d=+y,f=Xn(l,i,90),v=Zn(t,e,d),g=Xn(c,s,90),h=Zn(r,n,d),_):d},_.extentMajor([[-180,-90+F],[180,90-F]]).extentMinor([[-180,-80-F],[180,80+F]])}const qt=e=>e;var Gt=new be,Ft=new be,Sr,Mr,Wt,Ut,Ge={point:de,lineStart:de,lineEnd:de,polygonStart:function(){Ge.lineStart=gi,Ge.lineEnd=di},polygonEnd:function(){Ge.lineStart=Ge.lineEnd=Ge.point=de,Gt.add(Q(Ft)),Ft=new be},result:function(){var e=Gt/2;return Gt=new be,e}};function gi(){Ge.point=vi}function vi(e,t){Ge.point=Pr,Sr=Wt=e,Mr=Ut=t}function Pr(e,t){Ft.add(Ut*e-Wt*t),Wt=e,Ut=t}function di(){Pr(Sr,Mr)}const Hn=Ge;var Ve=1/0,kt=Ve,ut=-Ve,wt=ut,mi={point:yi,lineStart:de,lineEnd:de,polygonStart:de,polygonEnd:de,result:function(){var e=[[Ve,kt],[ut,wt]];return ut=wt=-(kt=Ve=1/0),e}};function yi(e,t){e<Ve&&(Ve=e),e>ut&&(ut=e),t<kt&&(kt=t),t>wt&&(wt=t)}const St=mi;var Vt=0,Jt=0,xe=0,Mt=0,Pt=0,Fe=0,Kt=0,Qt=0,et=0,Lr,Rr,Se,Me,Ee={point:Oe,lineStart:qn,lineEnd:Fn,polygonStart:function(){Ee.lineStart=wi,Ee.lineEnd=Si},polygonEnd:function(){Ee.point=Oe,Ee.lineStart=qn,Ee.lineEnd=Fn},result:function(){var e=et?[Kt/et,Qt/et]:Fe?[Mt/Fe,Pt/Fe]:xe?[Vt/xe,Jt/xe]:[NaN,NaN];return Vt=Jt=xe=Mt=Pt=Fe=Kt=Qt=et=0,e}};function Oe(e,t){Vt+=e,Jt+=t,++xe}function qn(){Ee.point=Ei}function Ei(e,t){Ee.point=ki,Oe(Se=e,Me=t)}function ki(e,t){var n=e-Se,r=t-Me,i=Ye(n*n+r*r);Mt+=i*(Se+e)/2,Pt+=i*(Me+t)/2,Fe+=i,Oe(Se=e,Me=t)}function Fn(){Ee.point=Oe}function wi(){Ee.point=Mi}function Si(){Nr(Lr,Rr)}function Mi(e,t){Ee.point=Nr,Oe(Lr=Se=e,Rr=Me=t)}function Nr(e,t){var n=e-Se,r=t-Me,i=Ye(n*n+r*r);Mt+=i*(Se+e)/2,Pt+=i*(Me+t)/2,Fe+=i,i=Me*e-Se*t,Kt+=i*(Se+e),Qt+=i*(Me+t),et+=i*3,Oe(Se=e,Me=t)}const Wn=Ee;function Ar(e){this._context=e}Ar.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,me);break}}},result:de};var $t=new be,Dt,Ir,Tr,tt,nt,Lt={point:de,lineStart:function(){Lt.point=Pi},lineEnd:function(){Dt&&Br(Ir,Tr),Lt.point=de},polygonStart:function(){Dt=!0},polygonEnd:function(){Dt=null},result:function(){var e=+$t;return $t=new be,e}};function Pi(e,t){Lt.point=Br,Ir=tt=e,Tr=nt=t}function Br(e,t){tt-=e,nt-=t,$t.add(Ye(tt*tt+nt*nt)),tt=e,nt=t}const Un=Lt;function Gr(){this._string=[]}Gr.prototype={_radius:4.5,_circle:Vn(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=Vn(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function Vn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Li(e,t){var n=4.5,r,i;function l(s){return s&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),He(s,r(i))),i.result()}return l.area=function(s){return He(s,r(Hn)),Hn.result()},l.measure=function(s){return He(s,r(Un)),Un.result()},l.bounds=function(s){return He(s,r(St)),St.result()},l.centroid=function(s){return He(s,r(Wn)),Wn.result()},l.projection=function(s){return arguments.length?(r=s==null?(e=null,qt):(e=s).stream,l):e},l.context=function(s){return arguments.length?(i=s==null?(t=null,new Gr):new Ar(t=s),typeof n!="function"&&i.pointRadius(n),l):t},l.pointRadius=function(s){return arguments.length?(n=typeof s=="function"?s:(i.pointRadius(+s),+s),l):n},l.projection(e).context(t)}function en(e){return function(t){var n=new jt;for(var r in e)n[r]=e[r];return n.stream=t,n}}function jt(){}jt.prototype={constructor:jt,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tn(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),He(n,e.stream(St)),t(St.result()),r!=null&&e.clipExtent(r),e}function Dr(e,t,n){return tn(e,function(r){var i=t[1][0]-t[0][0],l=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),c=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,m=+t[0][1]+(l-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([c,m])},n)}function Ri(e,t,n){return Dr(e,[[0,0],t],n)}function Ni(e,t,n){return tn(e,function(r){var i=+t,l=i/(r[1][0]-r[0][0]),s=(i-l*(r[1][0]+r[0][0]))/2,c=-l*r[0][1];e.scale(150*l).translate([s,c])},n)}function Ai(e,t,n){return tn(e,function(r){var i=+t,l=i/(r[1][1]-r[0][1]),s=-l*r[0][0],c=(i-l*(r[1][1]+r[0][1]))/2;e.scale(150*l).translate([s,c])},n)}var Jn=16,Ii=$(30*pe);function Kn(e,t){return+t?Bi(e,t):Ti(e)}function Ti(e){return en({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Bi(e,t){function n(r,i,l,s,c,m,p,o,a,f,v,g,h,d){var _=p-r,k=o-i,y=_*_+k*k;if(y>4*t&&h--){var M=s+f,P=c+v,B=m+g,A=Ye(M*M+P*P+B*B),C=lt(B/=A),D=Q(Q(B)-1)<F||Q(l-a)<F?(l+a)/2:ot(P,M),Y=e(D,C),T=Y[0],S=Y[1],z=T-r,X=S-i,E=k*z-_*X;(E*E/y>t||Q((_*z+k*X)/y-.5)>.3||s*f+c*v+m*g<Ii)&&(n(r,i,l,s,c,m,T,S,D,M/=A,P/=A,B,h,d),d.point(T,S),n(T,S,D,M,P,B,p,o,a,f,v,g,h,d))}}return function(r){var i,l,s,c,m,p,o,a,f,v,g,h,d={point:_,lineStart:k,lineEnd:M,polygonStart:function(){r.polygonStart(),d.lineStart=P},polygonEnd:function(){r.polygonEnd(),d.lineStart=k}};function _(C,D){C=e(C,D),r.point(C[0],C[1])}function k(){a=NaN,d.point=y,r.lineStart()}function y(C,D){var Y=Ue([C,D]),T=e(C,D);n(a,f,o,v,g,h,a=T[0],f=T[1],o=C,v=Y[0],g=Y[1],h=Y[2],Jn,r),r.point(a,f)}function M(){d.point=_,r.lineEnd()}function P(){k(),d.point=B,d.lineEnd=A}function B(C,D){y(i=C,D),l=a,s=f,c=v,m=g,p=h,d.point=y}function A(){n(a,f,o,v,g,h,l,s,i,c,m,p,Jn,r),d.lineEnd=M,M()}return d}}var Gi=en({point:function(e,t){this.stream.point(e*pe,t*pe)}});function Di(e){return en({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function zi(e,t,n,r,i){function l(s,c){return s*=r,c*=i,[t+e*s,n-e*c]}return l.invert=function(s,c){return[(s-t)/e*r,(n-c)/e*i]},l}function Qn(e,t,n,r,i,l){if(!l)return zi(e,t,n,r,i);var s=$(l),c=j(l),m=s*e,p=c*e,o=s/e,a=c/e,f=(c*n-s*t)/e,v=(c*t+s*n)/e;function g(h,d){return h*=r,d*=i,[m*h-p*d+t,n-p*h-m*d]}return g.invert=function(h,d){return[r*(o*h-a*d+f),i*(v-a*h-o*d)]},g}function Ci(e){return bi(function(){return e})()}function bi(e){var t,n=150,r=480,i=250,l=0,s=0,c=0,m=0,p=0,o,a=0,f=1,v=1,g=null,h=Yn,d=null,_,k,y,M=qt,P=.5,B,A,C,D,Y;function T(E){return C(E[0]*pe,E[1]*pe)}function S(E){return E=C.invert(E[0],E[1]),E&&[E[0]*Ie,E[1]*Ie]}T.stream=function(E){return D&&Y===E?D:D=Gi(Di(o)(h(B(M(Y=E)))))},T.preclip=function(E){return arguments.length?(h=E,g=void 0,X()):h},T.postclip=function(E){return arguments.length?(M=E,d=_=k=y=null,X()):M},T.clipAngle=function(E){return arguments.length?(h=+E?ci(g=E*pe):(g=null,Yn),X()):g*Ie},T.clipExtent=function(E){return arguments.length?(M=E==null?(d=_=k=y=null,qt):pi(d=+E[0][0],_=+E[0][1],k=+E[1][0],y=+E[1][1]),X()):d==null?null:[[d,_],[k,y]]},T.scale=function(E){return arguments.length?(n=+E,z()):n},T.translate=function(E){return arguments.length?(r=+E[0],i=+E[1],z()):[r,i]},T.center=function(E){return arguments.length?(l=E[0]%360*pe,s=E[1]%360*pe,z()):[l*Ie,s*Ie]},T.rotate=function(E){return arguments.length?(c=E[0]%360*pe,m=E[1]%360*pe,p=E.length>2?E[2]%360*pe:0,z()):[c*Ie,m*Ie,p*Ie]},T.angle=function(E){return arguments.length?(a=E%360*pe,z()):a*Ie},T.reflectX=function(E){return arguments.length?(f=E?-1:1,z()):f<0},T.reflectY=function(E){return arguments.length?(v=E?-1:1,z()):v<0},T.precision=function(E){return arguments.length?(B=Kn(A,P=E*E),X()):Ye(P)},T.fitExtent=function(E,b){return Dr(T,E,b)},T.fitSize=function(E,b){return Ri(T,E,b)},T.fitWidth=function(E,b){return Ni(T,E,b)},T.fitHeight=function(E,b){return Ai(T,E,b)};function z(){var E=Qn(n,0,0,f,v,a).apply(null,t(l,s)),b=Qn(n,r-E[0],i-E[1],f,v,a);return o=ri(c,m,p),A=Zt(t,b),C=Zt(o,A),B=Kn(A,P),X()}function X(){return D=Y=null,T}return function(){return t=e.apply(this,arguments),T.invert=t.invert&&S,z()}}const $n=Kr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc");function jn(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function nn(e,t){this._context=e,this._k=(1-t)/6}nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jn(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:jn(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(r){return new nn(r,t)}return n.tension=function(r){return e(+r)},n})(0);function Oi(e,t,n){var r=e._x1,i=e._y1,l=e._x2,s=e._y2;if(e._l01_a>An){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,m=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/m,i=(i*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/m}if(e._l23_a>An){var p=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,o=3*e._l23_a*(e._l23_a+e._l12_a);l=(l*p+e._x1*e._l23_2a-t*e._l12_2a)/o,s=(s*p+e._y1*e._l23_2a-n*e._l12_2a)/o}e._context.bezierCurveTo(r,i,l,s,e._x2,e._y2)}function zr(e,t){this._context=e,this._alpha=t}zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Oi(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yi=function e(t){function n(r){return t?new zr(r,t):new nn(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Xi(e){return e}function Zi(e){if(e==null)return Xi;var t,n,r=e.scale[0],i=e.scale[1],l=e.translate[0],s=e.translate[1];return function(c,m){m||(t=n=0);var p=2,o=c.length,a=new Array(o);for(a[0]=(t+=c[0])*r+l,a[1]=(n+=c[1])*i+s;p<o;)a[p]=c[p],++p;return a}}function Hi(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function qi(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return xn(e,n)})}:xn(e,t)}function xn(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,l=Fi(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:l}:r==null?{type:"Feature",id:n,properties:i,geometry:l}:{type:"Feature",id:n,bbox:r,properties:i,geometry:l}}function Fi(e,t){var n=Zi(e.transform),r=e.arcs;function i(o,a){a.length&&a.pop();for(var f=r[o<0?~o:o],v=0,g=f.length;v<g;++v)a.push(n(f[v],v));o<0&&Hi(a,g)}function l(o){return n(o)}function s(o){for(var a=[],f=0,v=o.length;f<v;++f)i(o[f],a);return a.length<2&&a.push(a[0]),a}function c(o){for(var a=s(o);a.length<4;)a.push(a[0]);return a}function m(o){return o.map(c)}function p(o){var a=o.type,f;switch(a){case"GeometryCollection":return{type:a,geometries:o.geometries.map(p)};case"Point":f=l(o.coordinates);break;case"MultiPoint":f=o.coordinates.map(l);break;case"LineString":f=s(o.arcs);break;case"MultiLineString":f=o.arcs.map(s);break;case"Polygon":f=m(o.arcs);break;case"MultiPolygon":f=o.arcs.map(m);break;default:return null}return{type:a,coordinates:f}}return p(t)}function er(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function Wi(e){var t={},n=e.map(function(){return[]});function r(h,d){h.forEach(function(_){_<0&&(_=~_);var k=t[_];k?k.push(d):t[_]=[d]})}function i(h,d){h.forEach(function(_){r(_,d)})}function l(h,d){h.type==="GeometryCollection"?h.geometries.forEach(function(_){l(_,d)}):h.type in s&&s[h.type](h.arcs,d)}var s={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(h,d){h.forEach(function(_){i(_,d)})}};e.forEach(l);for(var c in t)for(var m=t[c],p=m.length,o=0;o<p;++o)for(var a=o+1;a<p;++a){var f=m[o],v=m[a],g;(g=n[f])[c=er(g,v)]!==v&&g.splice(c,0,v),(g=n[v])[c=er(g,f)]!==f&&g.splice(c,0,f)}return n}var Rt=Math.abs,Je=Math.cos,Pe=Math.sin,it=1e-6,Nt=Math.PI,xt=Nt/2;function Ui(e){return e?e/Math.sin(e):1}function rn(e){return e>1?0:e<-1?Nt:Math.acos(e)}function Cr(e){return e>0?Math.sqrt(e):0}function br(e,t){var n=Je(t),r=Ui(rn(n*Je(e/=2)));return[2*n*Pe(e)*r,Pe(t)*r]}br.invert=function(e,t){if(!(e*e+4*t*t>Nt*Nt+it)){var n=e,r=t,i=25;do{var l=Pe(n),s=Pe(n/2),c=Je(n/2),m=Pe(r),p=Je(r),o=Pe(2*r),a=m*m,f=p*p,v=s*s,g=1-f*c*c,h=g?rn(p*c)*Cr(d=1/g):d=0,d,_=2*h*p*s-e,k=h*m-t,y=d*(f*v+h*p*c*a),M=d*(.5*l*o-h*2*m*s),P=d*.25*(o*s-h*m*f*l),B=d*(a*c+h*v*p),A=M*P-B*y;if(!A)break;var C=(k*M-_*B)/A,D=(_*P-k*y)/A;n-=C,r-=D}while((Rt(C)>it||Rt(D)>it)&&--i>0);return[n,r]}};function Or(e,t){var n=br(e,t);return[(n[0]+e/xt)/2,(n[1]+t)/2]}Or.invert=function(e,t){var n=e,r=t,i=25;do{var l=Je(r),s=Pe(r),c=Pe(2*r),m=s*s,p=l*l,o=Pe(n),a=Je(n/2),f=Pe(n/2),v=f*f,g=1-p*a*a,h=g?rn(l*a)*Cr(d=1/g):d=0,d,_=.5*(2*h*l*f+n/xt)-e,k=.5*(h*s+r)-t,y=.5*d*(p*v+h*l*a*m)+.5/xt,M=d*(o*c/4-h*s*f),P=.125*d*(c*f-h*s*p*o),B=.5*d*(m*a+h*v*l)+.5,A=M*P-B*y,C=(k*M-_*B)/A,D=(_*P-k*y)/A;n-=C,r-=D}while((Rt(C)>it||Rt(D)>it)&&--i>0);return[n,r]};function Vi(){return Ci(Or).scale(158.837)}function tr(e,t,n){const r=e.slice();return r[50]=t[n],r}function nr(e,t,n){const r=e.slice();return r[50]=t[n],r}function rr(e,t,n){const r=e.slice();return r[50]=t[n],r}function ir(e,t,n){const r=e.slice();return r[57]=t[n],r[59]=n,r}function or(e,t,n){const r=e.slice();return r[60]=t[n],r}function lr(e){let t,n=e[8],r,i,l,s,c=fr(e),m=e[5],p=[];for(let h=0;h<m.length;h+=1)p[h]=hr(rr(e,m,h));let o=e[5],a=[];for(let h=0;h<o.length;h+=1)a[h]=pr(nr(e,o,h));const f=h=>dt(a[h],1,1,()=>{a[h]=null});let v=e[5],g=[];for(let h=0;h<v.length;h+=1)g[h]=_r(tr(e,v,h));return{c(){t=R("g"),c.c(),r=R("g");for(let h=0;h<p.length;h+=1)p[h].c();i=De();for(let h=0;h<a.length;h+=1)a[h].c();l=De();for(let h=0;h<g.length;h+=1)g[h].c();this.h()},l(h){t=N(h,"g",{id:!0});var d=L(t);c.l(d),r=N(d,"g",{id:!0});var _=L(r);for(let k=0;k<p.length;k+=1)p[k].l(_);i=De();for(let k=0;k<a.length;k+=1)a[k].l(_);l=De();for(let k=0;k<g.length;k+=1)g[k].l(_);_.forEach(w),d.forEach(w),this.h()},h(){u(r,"id","artists"),u(t,"id","map")},m(h,d){ee(h,t,d),c.m(t,null),I(t,r);for(let _=0;_<p.length;_+=1)p[_].m(r,null);I(r,i);for(let _=0;_<a.length;_+=1)a[_].m(r,null);I(r,l);for(let _=0;_<g.length;_+=1)g[_].m(r,null);s=!0},p(h,d){if(d[0]&256&&vr(n,n=h[8])?(c.d(1),c=fr(h),c.c(),c.m(t,r)):c.p(h,d),d[0]&774244){m=h[5];let _;for(_=0;_<m.length;_+=1){const k=rr(h,m,_);p[_]?p[_].p(k,d):(p[_]=hr(k),p[_].c(),p[_].m(r,i))}for(;_<p.length;_+=1)p[_].d(1);p.length=m.length}if(d[0]&7544868){o=h[5];let _;for(_=0;_<o.length;_+=1){const k=nr(h,o,_);a[_]?(a[_].p(k,d),We(a[_],1)):(a[_]=pr(k),a[_].c(),We(a[_],1),a[_].m(r,l))}for(dr(),_=o.length;_<a.length;_+=1)f(_);mr()}if(d[0]&466978){v=h[5];let _;for(_=0;_<v.length;_+=1){const k=tr(h,v,_);g[_]?g[_].p(k,d):(g[_]=_r(k),g[_].c(),g[_].m(r,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=v.length}},i(h){if(!s){for(let d=0;d<o.length;d+=1)We(a[d]);s=!0}},o(h){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)dt(a[d]);s=!1},d(h){h&&w(t),c.d(h),rt(p,h),rt(a,h),rt(g,h)}}}function ur(e){let t,n;return{c(){t=R("path"),this.h()},l(r){t=N(r,"path",{d:!0,fill:!0,stroke:!0}),L(t).forEach(w),this.h()},h(){u(t,"d",n=e[7](e[60])),u(t,"fill","none"),u(t,"stroke","lightgray")},m(r,i){ee(r,t,i)},p(r,i){i[0]&128&&n!==(n=r[7](r[60]))&&u(t,"d",n)},d(r){r&&w(t)}}}function ar(e){let t,n=e[3].features,r=[];for(let i=0;i<n.length;i+=1)r[i]=sr(ir(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=De()},l(i){for(let l=0;l<r.length;l+=1)r[l].l(i);t=De()},m(i,l){for(let s=0;s<r.length;s+=1)r[s].m(i,l);ee(i,t,l)},p(i,l){if(l[0]&152){n=i[3].features;let s;for(s=0;s<n.length;s+=1){const c=ir(i,n,s);r[s]?r[s].p(c,l):(r[s]=sr(c),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){rt(r,i),i&&w(t)}}}function sr(e){let t,n,r,i;return{c(){t=R("path"),this.h()},l(l){t=N(l,"path",{id:!0,d:!0,stroke:!0,fill:!0}),L(t).forEach(w),this.h()},h(){u(t,"id",n=e[57].id),u(t,"d",r=e[7](e[57])),u(t,"stroke","none"),u(t,"fill",i=$n[e[4][e[59]]])},m(l,s){ee(l,t,s)},p(l,s){s[0]&8&&n!==(n=l[57].id)&&u(t,"id",n),s[0]&136&&r!==(r=l[7](l[57]))&&u(t,"d",r),s[0]&16&&i!==(i=$n[l[4][l[59]]])&&u(t,"fill",i)},d(l){l&&w(t)}}}function fr(e){let t,n,r,i,l,s,c,m,p=e[10],o=[];for(let f=0;f<p.length;f+=1)o[f]=ur(or(e,p,f));let a=e[3]&&ar(e);return{c(){t=R("g"),n=R("path"),i=R("g");for(let f=0;f<o.length;f+=1)o[f].c();l=R("g"),a&&a.c(),s=R("g"),c=R("path"),this.h()},l(f){t=N(f,"g",{id:!0});var v=L(t);n=N(v,"path",{d:!0,fill:!0,stroke:!0}),L(n).forEach(w),v.forEach(w),i=N(f,"g",{id:!0});var g=L(i);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(w),l=N(f,"g",{id:!0});var h=L(l);a&&a.l(h),h.forEach(w),s=N(f,"g",{id:!0});var d=L(s);c=N(d,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(c).forEach(w),d.forEach(w),this.h()},h(){u(n,"d",r=e[7](e[11])),u(n,"fill",Ur),u(n,"stroke","none"),u(t,"id","fill"),u(i,"id","graticules"),u(l,"id","countries"),u(c,"d",m=e[7](e[11])),u(c,"fill","none"),u(c,"stroke","lightgray"),u(c,"stroke-width","2"),u(s,"id","outline")},m(f,v){ee(f,t,v),I(t,n),ee(f,i,v);for(let g=0;g<o.length;g+=1)o[g].m(i,null);ee(f,l,v),a&&a.m(l,null),ee(f,s,v),I(s,c)},p(f,v){if(v[0]&128&&r!==(r=f[7](f[11]))&&u(n,"d",r),v[0]&1152){p=f[10];let g;for(g=0;g<p.length;g+=1){const h=or(f,p,g);o[g]?o[g].p(h,v):(o[g]=ur(h),o[g].c(),o[g].m(i,null))}for(;g<o.length;g+=1)o[g].d(1);o.length=p.length}f[3]?a?a.p(f,v):(a=ar(f),a.c(),a.m(l,null)):a&&(a.d(1),a=null),v[0]&128&&m!==(m=f[7](f[11]))&&u(c,"d",m)},d(f){f&&w(t),f&&w(i),rt(o,f),f&&w(l),a&&a.d(),f&&w(s)}}}function cr(e){let t,n;function r(s,c){return c[0]&36&&(t=null),t==null&&(t=!!s[14](s[2][0],s[50][0])),t?Ki:Ji}let i=r(e,[-1,-1,-1]),l=i(e);return{c(){l.c(),n=De()},l(s){l.l(s),n=De()},m(s,c){l.m(s,c),ee(s,n,c)},p(s,c){i===(i=r(s,c))&&l?l.p(s,c):(l.d(1),l=i(s),l&&(l.c(),l.m(n.parentNode,n)))},d(s){l.d(s),s&&w(n)}}}function Ji(e){let t,n,r,i,l,s,c,m,p;return{c(){t=R("g"),n=R("g"),r=R("g"),i=R("path"),c=R("path"),this.h()},l(o){t=N(o,"g",{transform:!0});var a=L(t);n=N(a,"g",{transform:!0});var f=L(n);r=N(f,"g",{transform:!0});var v=L(r);i=N(v,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(i).forEach(w),v.forEach(w),f.forEach(w),a.forEach(w),c=N(o,"path",{d:!0,stroke:!0,fill:!0,opacity:!0,"stroke-width":!0}),L(c).forEach(w),this.h()},h(){u(i,"d","M 0,-5 L 10,0 L 0,5 L 0,-5 Z"),u(i,"fill","#cc0000"),u(i,"stroke","black"),u(i,"stroke-width","2"),u(r,"transform","translate("+(-x*2-10)+", 0)"),u(n,"transform",l="rotate("+e[15]([e[16](e[2]),e[17](e[2])],[e[16](e[50]),e[17](e[50])])+")"),u(t,"transform",s="translate("+e[16](e[50])+", "+e[17](e[50])+")"),u(c,"d",m=e[12]([e[16](e[2]),e[17](e[2])],[e[16](e[50]),e[17](e[50])])),u(c,"stroke","#c00"),u(c,"fill","none"),u(c,"opacity","0.5"),u(c,"stroke-width",p=e[19](e[2],e[50]))},m(o,a){ee(o,t,a),I(t,n),I(n,r),I(r,i),ee(o,c,a)},p(o,a){a[0]&36&&l!==(l="rotate("+o[15]([o[16](o[2]),o[17](o[2])],[o[16](o[50]),o[17](o[50])])+")")&&u(n,"transform",l),a[0]&32&&s!==(s="translate("+o[16](o[50])+", "+o[17](o[50])+")")&&u(t,"transform",s),a[0]&36&&m!==(m=o[12]([o[16](o[2]),o[17](o[2])],[o[16](o[50]),o[17](o[50])]))&&u(c,"d",m),a[0]&36&&p!==(p=o[19](o[2],o[50]))&&u(c,"stroke-width",p)},d(o){o&&w(t),o&&w(c)}}}function Ki(e){let t,n,r,i,l,s,c,m,p;return{c(){t=R("g"),n=R("g"),r=R("g"),i=R("path"),c=R("path"),this.h()},l(o){t=N(o,"g",{transform:!0});var a=L(t);n=N(a,"g",{transform:!0});var f=L(n);r=N(f,"g",{transform:!0});var v=L(r);i=N(v,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(i).forEach(w),v.forEach(w),f.forEach(w),a.forEach(w),c=N(o,"path",{d:!0,stroke:!0,fill:!0,opacity:!0,"stroke-width":!0}),L(c).forEach(w),this.h()},h(){u(i,"d","M 0,-5 L 10,0 L 0,5 L 0,-5 Z"),u(i,"fill","#cc0000"),u(i,"stroke","black"),u(i,"stroke-width","2"),u(r,"transform","translate("+x*2+", 0)"),u(n,"transform",l="rotate("+e[15]([e[16](e[50]),e[17](e[50])],[e[16](e[2]),e[17](e[2])])+")"),u(t,"transform",s="translate("+e[16](e[50])+", "+e[17](e[50])+")"),u(c,"d",m=e[12]([e[16](e[50]),e[17](e[50])],[e[16](e[2]),e[17](e[2])])),u(c,"stroke","#c00"),u(c,"fill","none"),u(c,"opacity","0.5"),u(c,"stroke-width",p=e[19](e[2],e[50]))},m(o,a){ee(o,t,a),I(t,n),I(n,r),I(r,i),ee(o,c,a)},p(o,a){a[0]&36&&l!==(l="rotate("+o[15]([o[16](o[50]),o[17](o[50])],[o[16](o[2]),o[17](o[2])])+")")&&u(n,"transform",l),a[0]&32&&s!==(s="translate("+o[16](o[50])+", "+o[17](o[50])+")")&&u(t,"transform",s),a[0]&36&&m!==(m=o[12]([o[16](o[50]),o[17](o[50])],[o[16](o[2]),o[17](o[2])]))&&u(c,"d",m),a[0]&36&&p!==(p=o[19](o[2],o[50]))&&u(c,"stroke-width",p)},d(o){o&&w(t),o&&w(c)}}}function hr(e){let t,n,r,i,l,s,c,m,p,o=e[2][0]!==e[50][0]&&cr(e);return{c(){t=R("g"),n=R("line"),c=R("circle"),o&&o.c(),this.h()},l(a){t=N(a,"g",{});var f=L(t);n=N(f,"line",{x2:!0,y2:!0,x1:!0,y1:!0,stroke:!0}),L(n).forEach(w),c=N(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),L(c).forEach(w),o&&o.l(f),f.forEach(w),this.h()},h(){u(n,"x2",r=ze(e[6],e[50][1])),u(n,"y2",i=Ce(e[6],e[50][1])),u(n,"x1",l=e[16](e[50])),u(n,"y1",s=e[17](e[50])),u(n,"stroke","black"),u(c,"cx",m=ze(e[6],e[50][1])),u(c,"cy",p=Ce(e[6],e[50][1])),u(c,"r","2"),u(c,"fill","black")},m(a,f){ee(a,t,f),I(t,n),I(t,c),o&&o.m(t,null)},p(a,f){f[0]&96&&r!==(r=ze(a[6],a[50][1]))&&u(n,"x2",r),f[0]&96&&i!==(i=Ce(a[6],a[50][1]))&&u(n,"y2",i),f[0]&32&&l!==(l=a[16](a[50]))&&u(n,"x1",l),f[0]&32&&s!==(s=a[17](a[50]))&&u(n,"y1",s),f[0]&96&&m!==(m=ze(a[6],a[50][1]))&&u(c,"cx",m),f[0]&96&&p!==(p=Ce(a[6],a[50][1]))&&u(c,"cy",p),a[2][0]!==a[50][0]?o?o.p(a,f):(o=cr(a),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(a){a&&w(t),o&&o.d()}}}function Qi(e){let t,n,r,i;return{c(){t=R("image"),i=R("circle"),this.h()},l(l){t=N(l,"image",{id:!0,href:!0,style:!0,height:!0,width:!0,x:!0,y:!0}),L(t).forEach(w),i=N(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,fill:!0}),L(i).forEach(w),this.h()},h(){u(t,"id",n=O(e[50][0])+"-image-map"),u(t,"href",r=mt+e[20](e[50][0])),we(t,"outline","none"),u(t,"height",x*4),u(t,"width",x*4),u(t,"x",-x*2),u(t,"y",-x*2),u(i,"cx","0"),u(i,"cy","0"),u(i,"r",x*2),u(i,"stroke","black"),u(i,"fill","none")},m(l,s){ee(l,t,s),ee(l,i,s)},p(l,s){s[0]&32&&n!==(n=O(l[50][0])+"-image-map")&&u(t,"id",n),s[0]&32&&r!==(r=mt+l[20](l[50][0]))&&u(t,"href",r)},d(l){l&&w(t),l&&w(i)}}}function $i(e){let t,n,r,i;return{c(){t=R("image"),i=R("circle"),this.h()},l(l){t=N(l,"image",{id:!0,href:!0,style:!0,height:!0,width:!0,x:!0,y:!0}),L(t).forEach(w),i=N(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),L(i).forEach(w),this.h()},h(){u(t,"id",n=O(e[50][0])+"-image-map"),u(t,"href",r=mt+e[20](e[50][0])),we(t,"outline","none"),u(t,"height",x*4),u(t,"width",x*4),u(t,"x",-x*2),u(t,"y",-x*2),u(i,"cx","0"),u(i,"cy","0"),u(i,"r",x*2),u(i,"stroke","#c00"),u(i,"stroke-width","2"),u(i,"fill","none")},m(l,s){ee(l,t,s),ee(l,i,s)},p(l,s){s[0]&32&&n!==(n=O(l[50][0])+"-image-map")&&u(t,"id",n),s[0]&32&&r!==(r=mt+l[20](l[50][0]))&&u(t,"href",r)},d(l){l&&w(t),l&&w(i)}}}function pr(e){let t,n,r,i,l,s,c;function m(h,d){return h[50][0]===h[2][0]?$i:Qi}let p=m(e),o=p(e);function a(...h){return e[28](e[50],...h)}function f(...h){return e[29](e[50],...h)}function v(...h){return e[30](e[50],...h)}function g(...h){return e[31](e[50],...h)}return{c(){t=R("g"),o.c(),this.h()},l(h){t=N(h,"g",{id:!0,transform:!0,style:!0});var d=L(t);o.l(d),d.forEach(w),this.h()},h(){u(t,"id",n=O(e[50][0])+"-group-map"),u(t,"transform",r=e[13](e[16](e[50]),e[17](e[50]))),we(t,"outline","none")},m(h,d){ee(h,t,d),o.m(t,null),l=!0,s||(c=[$e(t,"focus",a),$e(t,"mouseover",f),$e(t,"blur",v),$e(t,"mouseout",g)],s=!0)},p(h,d){e=h,p===(p=m(e))&&o?o.p(e,d):(o.d(1),o=p(e),o&&(o.c(),o.m(t,null))),(!l||d[0]&32&&n!==(n=O(e[50][0])+"-group-map"))&&u(t,"id",n),(!l||d[0]&32&&r!==(r=e[13](e[16](e[50]),e[17](e[50]))))&&u(t,"transform",r)},i(h){l||(Fr(()=>{i||(i=Ln(t,Rn,{},!0)),i.run(1)}),l=!0)},o(h){i||(i=Ln(t,Rn,{},!1)),i.run(0),l=!1},d(h){h&&w(t),o.d(),h&&i&&i.end(),s=!1,Wr(c)}}}function _r(e){let t,n,r,i,l,s,c,m,p,o=e[50][0]+"",a,f,v,g,h,d=e[50][1][0].country+"",_,k,y,M,P,B=e[18](e[50][1])+"",A,C,D,Y,T;return{c(){t=R("g"),n=R("rect"),p=R("text"),a=_e(o),h=R("text"),_=_e(d),P=R("text"),A=_e(B),this.h()},l(S){t=N(S,"g",{transform:!0});var z=L(t);n=N(z,"rect",{id:!0,class:!0,x:!0,width:!0,y:!0,height:!0,fill:!0,stroke:!0,rx:!0,opacity:!0}),L(n).forEach(w),p=N(z,"text",{id:!0,class:!0,opacity:!0,x:!0,y:!0,"text-anchor":!0});var X=L(p);a=ge(X,o),X.forEach(w),h=N(z,"text",{id:!0,class:!0,opacity:!0,x:!0,y:!0,"text-anchor":!0});var E=L(h);_=ge(E,d),E.forEach(w),P=N(z,"text",{id:!0,class:!0,opacity:!0,x:!0,y:!0,"text-anchor":!0});var b=L(P);A=ge(b,B),b.forEach(w),z.forEach(w),this.h()},h(){u(n,"id",r=O(e[50][0])+"-rect-map"),u(n,"class",i=O(e[50][0])+"-map-detail pointer-events-none"),u(n,"x",l=-(ft(["#"+O(e[50][0])+"-map-name","#"+O(e[50][0])+"-map-origin","#"+O(e[50][0])+"-map-year"],[e[50][0],e[50][1][0].country,e[18](e[50][1])])+Ze)/2),u(n,"width",s=ft(["#"+O(e[50][0])+"-map-name","#"+O(e[50][0])+"-map-origin","#"+O(e[50][0])+"-map-year"],[e[50][0],e[50][1][0].country,e[18](e[50][1])])+Ze),u(n,"y",c=e[17](e[50])<e[1]/2?(ce*2.5+Xe("#"+O(e[50][0])+"-map-name",e[50][0]))/2:-2*(ce*4.75+Xe("#"+O(e[50][0])+"-map-name",e[50][0]))/2),u(n,"height",m=3*Xe("#"+O(e[50][0])+"-map-name",e[50][0])+Ze-10),u(n,"fill","white"),u(n,"stroke","black"),u(n,"rx","15"),u(n,"opacity","0"),u(p,"id",f=O(e[50][0])+"-map-name"),u(p,"class",v=O(e[50][0])+"-map-detail pointer-events-none"),u(p,"opacity","0"),u(p,"x","0"),u(p,"y",g=e[17](e[50])<e[1]/2?ce*2.75:-ce*4.75),u(p,"text-anchor","middle"),u(h,"id",k=O(e[50][0])+"-map-origin"),u(h,"class",y=O(e[50][0])+"-map-detail pointer-events-none"),u(h,"opacity","0"),u(h,"x","0"),u(h,"y",M=e[17](e[50])<e[1]/2?ce*3.75:-ce*3.75),u(h,"text-anchor","middle"),u(P,"id",C=O(e[50][0])+"-map-year"),u(P,"class",D=O(e[50][0])+"-map-detail pointer-events-none"),u(P,"opacity","0"),u(P,"x","0"),u(P,"y",Y=e[17](e[50])<e[1]/2?ce*4.75:-ce*2.75),u(P,"text-anchor","middle"),u(t,"transform",T=e[13](e[16](e[50]),e[17](e[50])))},m(S,z){ee(S,t,z),I(t,n),I(t,p),I(p,a),I(t,h),I(h,_),I(t,P),I(P,A)},p(S,z){z[0]&32&&r!==(r=O(S[50][0])+"-rect-map")&&u(n,"id",r),z[0]&32&&i!==(i=O(S[50][0])+"-map-detail pointer-events-none")&&u(n,"class",i),z[0]&32&&l!==(l=-(ft(["#"+O(S[50][0])+"-map-name","#"+O(S[50][0])+"-map-origin","#"+O(S[50][0])+"-map-year"],[S[50][0],S[50][1][0].country,S[18](S[50][1])])+Ze)/2)&&u(n,"x",l),z[0]&32&&s!==(s=ft(["#"+O(S[50][0])+"-map-name","#"+O(S[50][0])+"-map-origin","#"+O(S[50][0])+"-map-year"],[S[50][0],S[50][1][0].country,S[18](S[50][1])])+Ze)&&u(n,"width",s),z[0]&34&&c!==(c=S[17](S[50])<S[1]/2?(ce*2.5+Xe("#"+O(S[50][0])+"-map-name",S[50][0]))/2:-2*(ce*4.75+Xe("#"+O(S[50][0])+"-map-name",S[50][0]))/2)&&u(n,"y",c),z[0]&32&&m!==(m=3*Xe("#"+O(S[50][0])+"-map-name",S[50][0])+Ze-10)&&u(n,"height",m),z[0]&32&&o!==(o=S[50][0]+"")&&It(a,o),z[0]&32&&f!==(f=O(S[50][0])+"-map-name")&&u(p,"id",f),z[0]&32&&v!==(v=O(S[50][0])+"-map-detail pointer-events-none")&&u(p,"class",v),z[0]&34&&g!==(g=S[17](S[50])<S[1]/2?ce*2.75:-ce*4.75)&&u(p,"y",g),z[0]&32&&d!==(d=S[50][1][0].country+"")&&It(_,d),z[0]&32&&k!==(k=O(S[50][0])+"-map-origin")&&u(h,"id",k),z[0]&32&&y!==(y=O(S[50][0])+"-map-detail pointer-events-none")&&u(h,"class",y),z[0]&34&&M!==(M=S[17](S[50])<S[1]/2?ce*3.75:-ce*3.75)&&u(h,"y",M),z[0]&32&&B!==(B=S[18](S[50][1])+"")&&It(A,B),z[0]&32&&C!==(C=O(S[50][0])+"-map-year")&&u(P,"id",C),z[0]&32&&D!==(D=O(S[50][0])+"-map-detail pointer-events-none")&&u(P,"class",D),z[0]&34&&Y!==(Y=S[17](S[50])<S[1]/2?ce*4.75:-ce*2.75)&&u(P,"y",Y),z[0]&32&&T!==(T=S[13](S[16](S[50]),S[17](S[50])))&&u(t,"transform",T)},d(S){S&&w(t)}}}function ji(e){let t,n,r,i,l,s,c,m,p,o,a,f,v,g,h,d,_,k,y,M,P,B,A,C,D,Y,T,S,z,X,E,b,W,te,U,he,ne,le,re,ue,ae,Le,Ke,ye,Re,G,Z,ie,J,oe,se,fe,ke,Ne,V=e[7]&&lr(e);return{c(){t=Mn("div"),n=R("svg"),r=R("defs"),i=R("style"),l=_e(`.pointer {
          cursor: pointer;
        }
        .slider {
          cursor: ew-resize;
        }
        #handle {
          fill: #000000;
          stroke: #000000;
          stroke-miterlimit: 10;
        }`),V&&V.c(),s=R("svg"),c=R("defs"),m=R("style"),p=_e(`.cls-1,
          .cls-2 {
            fill: #c00;
          }
          .cls-2 {
            stroke: #000;
            stroke-miterlimit: 10;
            stroke-width: 0.25px;
          }`),o=R("g"),a=R("path"),f=R("polygon"),v=R("path"),d=Zr(),_=Mn("div"),k=R("svg"),y=R("g"),M=R("rect"),P=R("g"),B=R("g"),A=R("g"),C=R("g"),D=R("path"),Y=R("line"),T=R("circle"),S=R("text"),z=_e("A"),X=R("circle"),E=R("text"),b=_e("B"),W=R("text"),te=_e("A influenced B"),U=R("g"),he=R("g"),ne=R("g"),le=R("g"),re=R("path"),ue=R("line"),ae=R("circle"),Le=R("text"),Ke=_e("A"),ye=R("circle"),Re=R("text"),G=_e("B"),Z=R("text"),ie=_e("A influenced B"),J=R("g"),oe=R("text"),se=_e("Line thickness encodes birth year gap"),this.h()},l(K){t=Pn(K,"DIV",{id:!0,class:!0,style:!0});var H=L(t);n=N(H,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var Ae=L(n);r=N(Ae,"defs",{});var at=L(r);i=N(at,"style",{});var on=L(i);l=ge(on,`.pointer {
          cursor: pointer;
        }
        .slider {
          cursor: ew-resize;
        }
        #handle {
          fill: #000000;
          stroke: #000000;
          stroke-miterlimit: 10;
        }`),on.forEach(w),at.forEach(w),V&&V.l(Ae),s=N(Ae,"svg",{id:!0,xmlns:!0,viewBox:!0});var At=L(s);c=N(At,"defs",{});var ln=L(c);m=N(ln,"style",{});var un=L(m);p=ge(un,`.cls-1,
          .cls-2 {
            fill: #c00;
          }
          .cls-2 {
            stroke: #000;
            stroke-miterlimit: 10;
            stroke-width: 0.25px;
          }`),un.forEach(w),ln.forEach(w),o=N(At,"g",{transform:!0});var st=L(o);a=N(st,"path",{d:!0}),L(a).forEach(w),f=N(st,"polygon",{class:!0,points:!0}),L(f).forEach(w),v=N(st,"path",{class:!0,d:!0}),L(v).forEach(w),st.forEach(w),At.forEach(w),Ae.forEach(w),d=Hr(H),_=Pn(H,"DIV",{class:!0,style:!0});var an=L(_);k=N(an,"svg",{id:!0,class:!0,style:!0,xmlns:!0,viewBox:!0,preserveAspectRatio:!0});var sn=L(k);y=N(sn,"g",{transform:!0});var Qe=L(y);M=N(Qe,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,stroke:!0,rx:!0}),L(M).forEach(w),P=N(Qe,"g",{transform:!0});var Te=L(P);B=N(Te,"g",{transform:!0});var fn=L(B);A=N(fn,"g",{transform:!0});var cn=L(A);C=N(cn,"g",{transform:!0});var hn=L(C);D=N(hn,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(D).forEach(w),hn.forEach(w),cn.forEach(w),fn.forEach(w),Y=N(Te,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,opacity:!0}),L(Y).forEach(w),T=N(Te,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(T).forEach(w),S=N(Te,"text",{x:!0,y:!0});var pn=L(S);z=ge(pn,"A"),pn.forEach(w),X=N(Te,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(X).forEach(w),E=N(Te,"text",{x:!0,y:!0});var _n=L(E);b=ge(_n,"B"),_n.forEach(w),W=N(Te,"text",{x:!0,y:!0});var gn=L(W);te=ge(gn,"A influenced B"),gn.forEach(w),Te.forEach(w),U=N(Qe,"g",{transform:!0});var Be=L(U);he=N(Be,"g",{transform:!0});var vn=L(he);ne=N(vn,"g",{transform:!0});var dn=L(ne);le=N(dn,"g",{transform:!0});var mn=L(le);re=N(mn,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),L(re).forEach(w),mn.forEach(w),dn.forEach(w),vn.forEach(w),ue=N(Be,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,opacity:!0}),L(ue).forEach(w),ae=N(Be,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(ae).forEach(w),Le=N(Be,"text",{x:!0,y:!0});var yn=L(Le);Ke=ge(yn,"A"),yn.forEach(w),ye=N(Be,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(ye).forEach(w),Re=N(Be,"text",{x:!0,y:!0});var En=L(Re);G=ge(En,"B"),En.forEach(w),Z=N(Be,"text",{x:!0,y:!0});var kn=L(Z);ie=ge(kn,"A influenced B"),kn.forEach(w),Be.forEach(w),J=N(Qe,"g",{transform:!0});var wn=L(J);oe=N(wn,"text",{"font-size":!0,"text-anchor":!0,x:!0,y:!0,stroke:!0,opacity:!0});var Sn=L(oe);se=ge(Sn,"Line thickness encodes birth year gap"),Sn.forEach(w),wn.forEach(w),Qe.forEach(w),sn.forEach(w),an.forEach(w),H.forEach(w),this.h()},h(){u(a,"d","M4.24,28.34l4.24-11.31L4.24,5.71,0,17.02l4.24,11.31Zm0-2.85l-2.8-7.47H7.04s-2.8,7.47-2.8,7.47Z"),u(f,"class","cls-1"),u(f,"points","4.24 8.29 7.04 15.76 1.44 15.76 4.24 8.29"),u(v,"class","cls-2"),u(v,"d","M1.83,.24h1.63l1.28,1.85h.01V.24h1.61V4.58h-1.62l-1.28-1.85h-.01v1.85H1.83V.24Z"),u(o,"transform",e[9]),u(s,"id","compass"),u(s,"xmlns","http://www.w3.org/2000/svg"),u(s,"viewBox",g="0 0 "+e[0]+" "+e[1]),u(n,"class","inline-block absolute top-0 left-0"),u(n,"viewBox",h="0, 0, "+e[0]+", "+e[1]),u(n,"preserveAspectRatio","xMidYMid meet"),u(M,"x","2"),u(M,"y","2"),u(M,"width",zt-4),u(M,"height",Ct-4),u(M,"fill","white"),u(M,"stroke","black"),u(M,"rx","15"),u(D,"d","M 0,-5 L 10,0 L 0,5 L 0,-5 Z"),u(D,"fill","#cc0000"),u(D,"stroke","black"),u(D,"stroke-width","2"),u(C,"transform","translate("+(-x*2+5)+", 0)"),u(A,"transform","rotate(0)"),u(B,"transform","translate(115, 20)"),u(Y,"x1","20"),u(Y,"y1","20"),u(Y,"x2","115"),u(Y,"y2","20"),u(Y,"stroke","#c00"),u(Y,"stroke-width","5"),u(Y,"opacity","0.5"),u(T,"cx","20"),u(T,"cy","20"),u(T,"r",x),u(T,"fill","white"),u(T,"stroke","#c00"),u(S,"x","15"),u(S,"y","25"),u(X,"cx","115"),u(X,"cy","20"),u(X,"r",x),u(X,"fill","white"),u(X,"stroke","black"),u(E,"x","110"),u(E,"y","25"),u(W,"x","15"),u(W,"y","50"),u(P,"transform","translate(0, 20)"),u(re,"d","M 0,-5 L 10,0 L 0,5 L 0,-5 Z"),u(re,"fill","#cc0000"),u(re,"stroke","black"),u(re,"stroke-width","2"),u(le,"transform","translate("+(x*2-15)+", 0)"),u(ne,"transform","rotate(0)"),u(he,"transform","translate(20, 20)"),u(ue,"x1","20"),u(ue,"y1","20"),u(ue,"x2","115"),u(ue,"y2","20"),u(ue,"stroke","#c00"),u(ue,"stroke-width","5"),u(ue,"opacity","0.5"),u(ae,"cx","20"),u(ae,"cy","20"),u(ae,"r",x),u(ae,"fill","white"),u(ae,"stroke","black"),u(Le,"x","15"),u(Le,"y","25"),u(ye,"cx","115"),u(ye,"cy","20"),u(ye,"r",x),u(ye,"fill","white"),u(ye,"stroke","#c00"),u(Re,"x","110"),u(Re,"y","25"),u(Z,"x","15"),u(Z,"y","50"),u(U,"transform","translate(140, 20)"),u(oe,"font-size","smaller"),u(oe,"text-anchor","middle"),u(oe,"x","140"),u(oe,"y","0"),u(oe,"stroke","#c00"),u(oe,"opacity","0.5"),u(J,"transform","translate(0, 18)"),u(y,"transform","scale("+bt+")"),u(k,"id","legend"),u(k,"class","inline-block absolute top-0 left-0"),we(k,"padding-top","12px"),u(k,"xmlns","http://www.w3.org/2000/svg"),u(k,"viewBox","0 0 "+zt+" "+Ct),u(k,"preserveAspectRatio","xMidYMid meet"),u(_,"class","absolute left-0 bottom-0"),we(_,"width",zt*bt+"px"),we(_,"height",Ct*bt+"px"),u(t,"id","container"),u(t,"class","inline-block relative align-top overflow-hidden"),we(t,"width",e[0]+"px"),we(t,"height",e[1]+"px")},m(K,H){ee(K,t,H),I(t,n),I(n,r),I(r,i),I(i,l),V&&V.m(n,null),I(n,s),I(s,c),I(c,m),I(m,p),I(s,o),I(o,a),I(o,f),I(o,v),I(t,d),I(t,_),I(_,k),I(k,y),I(y,M),I(y,P),I(P,B),I(B,A),I(A,C),I(C,D),I(P,Y),I(P,T),I(P,S),I(S,z),I(P,X),I(P,E),I(E,b),I(P,W),I(W,te),I(y,U),I(U,he),I(he,ne),I(ne,le),I(le,re),I(U,ue),I(U,ae),I(U,Le),I(Le,Ke),I(U,ye),I(U,Re),I(Re,G),I(U,Z),I(Z,ie),I(y,J),I(J,oe),I(oe,se),fe=!0,ke||(Ne=$e(n,"click",e[23]),ke=!0)},p(K,H){K[7]?V?(V.p(K,H),H[0]&128&&We(V,1)):(V=lr(K),V.c(),We(V,1),V.m(n,s)):V&&(dr(),dt(V,1,1,()=>{V=null}),mr()),(!fe||H[0]&512)&&u(o,"transform",K[9]),(!fe||H[0]&3&&g!==(g="0 0 "+K[0]+" "+K[1]))&&u(s,"viewBox",g),(!fe||H[0]&3&&h!==(h="0, 0, "+K[0]+", "+K[1]))&&u(n,"viewBox",h),(!fe||H[0]&1)&&we(t,"width",K[0]+"px"),(!fe||H[0]&2)&&we(t,"height",K[1]+"px")},i(K){fe||(We(V),fe=!0)},o(K){dt(V),fe=!1},d(K){K&&w(t),V&&V.d(),ke=!1,Ne()}}}const x=15,ce=20,Ze=20,gr=1e3,zt=280,Ct=80,bt=.8;function xi(e,t,n){let r,i,l;const s=qr();let c=new Worker(""+new URL("../workers/sim-nodes.worker-6d6b735a.js",import.meta.url).href);const m=G=>{n(5,k=G.data.nodes),n(2,y=k.filter(Z=>Z[0]===y[0])[0])};c.onmessage=m;let{width:p}=t,{height:o}=t,a,f,v,g,h,d,_,k,y;const M=_i(),P=M.lines(),B=M.outline();let A,C,D;const Y=(G,Z)=>{if(G[0]===Z[0]&&G[1]===Z[1])return"";const ie=$r(),J=Yi(ie);return Z[0]-G[0],Z[1]-G[1],J.lineStart(),J.point(G[0],G[1]),J.point(Z[0],Z[1]),J.lineEnd(),ie.toString()};let T;const S=(G,Z)=>`translate(${G}, ${Z})`,z=(G,Z)=>{const ie=d.find(J=>J[0]===Z);return ie?!!ie[1].find(oe=>oe.influenced===G):!1},X=(G,Z)=>Math.atan2(Z[1]-G[1],Z[0]-G[0])*180/Math.PI,E=(G,Z)=>{n(2,y=h.filter(H=>H[0]===G)[0]),Z.push(y);let ie=180,J=180,oe=-180,se=-180;A.center([0,0]),A.scale(D),A.angle(0);for(const H of Z)H.x=ze(A,H[1]),H.y=Ce(A,H[1]),H[1][0].lon>oe&&(oe=H[1][0].lon),H[1][0].lat>se&&(se=H[1][0].lat),H[1][0].lon<ie&&(ie=H[1][0].lon),H[1][0].lat<J&&(J=H[1][0].lat);const fe=[(oe+ie)/2,(se+J)/2],ke=[[se,ie],[J,oe]],Ne=A(ke[0]),V=A(ke[1]),K=.6/Math.max(Math.abs(V[1]-Ne[1])/p,Math.abs(V[0]-Ne[0])/o);A.center(fe),A.translate([p/2,o/2]),A.scale(K*D),Math.abs(V[0]-Ne[0])>Math.abs(V[1]-Ne[1])?(A.angle(90),n(27,i=-90)):n(27,i=0),n(8,r+=1);for(const H of Z)H.x=ze(A,H[1]),H.y=Ce(A,H[1]);c.postMessage({nodes:Z,radius:x}),c.postMessage({nodes:Z,radius:x})},b=G=>G.hasOwnProperty("x")?G.x:ze(A,G[1]),W=G=>G.hasOwnProperty("y")?G.y:Ce(A,G[1]),te=G=>`${G[0].year} - ${G[1].year>2021?"":G[1].year}`,U=(G,Z)=>{const ie=G[1][0].year,J=Z[1][0].year;return T(Math.abs(J-ie))},he=G=>g.filter(ie=>ie.artist===G)[0].thumbnail,ne=G=>{Nn(G+"-map-detail").transition().duration(gr).attr("opacity",1)},le=G=>{Nn(G+"-map-detail").transition().duration(gr).attr("opacity",0)},re=()=>{A.center([0,0]),A.scale(D),A.angle(0),n(27,i=0),n(5,k=[]),n(8,r+=1)},ue=()=>{s("reset_influences",{})},ae=(G,Z,ie,J,oe)=>{n(3,a=qi(G,G.objects.countries)),f=Wi(G.objects.countries.geometries),n(6,A=Vi().fitSize([p,o+4],a)),n(7,C=Li().projection(A)),D=A.scale(),n(4,v=new Array(a.features.length));for(let se=0;se<v.length;++se)n(4,v[se]=Vr(f[se],fe=>v[fe])+1|0,v);if(d=ie,_=Z,J){h=Qr(J,ke=>ke.artist);let se=2e3,fe=0;for(const[ke,Ne]of _){const V=J.filter(K=>K.artist===ke)[0];for(const K of Ne){const H=J.filter(at=>at.artist===K.artist)[0],Ae=Math.abs(V.year-H.year);Ae>fe&&(fe=Ae),Ae<se&&(se=Ae)}}T=Jr().domain([se,fe]).range([2,x*4])}else console.error("Unable to load Artist Locations!");g=oe},Le=(G,Z)=>ne("."+O(G[0])),Ke=(G,Z)=>ne("."+O(G[0])),ye=(G,Z)=>le("."+O(G[0])),Re=(G,Z)=>le("."+O(G[0]));return e.$$set=G=>{"width"in G&&n(0,p=G.width),"height"in G&&n(1,o=G.height)},e.$$.update=()=>{e.$$.dirty[0]&4,e.$$.dirty[0]&134217731&&n(9,l=i===0?`translate(${p-25}, ${o-60}) rotate(${i}) scale(2)`:`translate(${p-65}, ${o-5}) rotate(${i}) scale(2)`)},n(0,p=0),n(1,o=0),n(3,a=null),f=[],n(4,v=[]),h=[],d=[],_=[],n(5,k=[]),n(8,r=0),n(27,i=0),[p,o,y,a,v,k,A,C,r,l,P,B,Y,S,z,X,b,W,te,U,he,ne,le,ue,E,re,ae,i,Le,Ke,ye,Re]}class fo extends Yr{constructor(t){super(),Xr(this,t,xi,ji,vr,{width:0,height:1,DisplayInfluences:24,ResetInfluences:25,Initialize:26},null,[-1,-1,-1])}get DisplayInfluences(){return this.$$.ctx[24]}get ResetInfluences(){return this.$$.ctx[25]}get Initialize(){return this.$$.ctx[26]}}export{fo as M};
