import{S as St,i as Xt,s as Ct,k as zt,P as S,q as at,l as Bt,m as F,Q as X,r as lt,h as w,n as d,p as K,b as Ot,F as M,L as tt,A as st,M as Gt,R as Yt}from"./index-8d2061e5.js";import{a as T}from"./config-331e8422.js";import{o as Dt}from"./ordinal-7966dd64.js";import{r as ft}from"./range-cc563a65.js";import{l as W,f as It,m as Pt}from"./linear-4ecbf3f0.js";import{m as Lt,a as Nt,b as Tt}from"./axis-000f9faf.js";import{c as jt,a as Ut}from"./catmullRom-d00a189e.js";import{g as qt}from"./group-4b12f8cd.js";import{c as A}from"./constant-b8884f20.js";import{p as ut}from"./math-84088ecb.js";const Qt=jt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function ct(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ht(t){this._context=t}ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,o){switch(t=+t,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,o):this._context.moveTo(t,o);break;case 1:this._point=2;default:this._context.lineTo(t,o);break}}};function gt(t){return new ht(t)}function dt(t){return t[0]}function mt(t){return t[1]}function Vt(t,o){var l=A(!0),c=null,h=gt,m=null;t=typeof t=="function"?t:t===void 0?dt:A(t),o=typeof o=="function"?o:o===void 0?mt:A(o);function i(n){var a,C=(n=ct(n)).length,e,f=!1,y;for(c==null&&(m=h(y=ut())),a=0;a<=C;++a)!(a<C&&l(e=n[a],a,n))===f&&((f=!f)?m.lineStart():m.lineEnd()),f&&m.point(+t(e,a,n),+o(e,a,n));if(y)return m=null,y+""||null}return i.x=function(n){return arguments.length?(t=typeof n=="function"?n:A(+n),i):t},i.y=function(n){return arguments.length?(o=typeof n=="function"?n:A(+n),i):o},i.defined=function(n){return arguments.length?(l=typeof n=="function"?n:A(!!n),i):l},i.curve=function(n){return arguments.length?(h=n,c!=null&&(m=h(c)),i):h},i.context=function(n){return arguments.length?(n==null?c=m=null:m=h(c=n),i):c},i}function Ht(t,o,l){var c=null,h=A(!0),m=null,i=gt,n=null;t=typeof t=="function"?t:t===void 0?dt:A(+t),o=typeof o=="function"?o:o===void 0?A(0):A(+o),l=typeof l=="function"?l:l===void 0?mt:A(+l);function a(e){var f,y,R,Y=(e=ct(e)).length,b,D=!1,v,z=new Array(Y),P=new Array(Y);for(m==null&&(n=i(v=ut())),f=0;f<=Y;++f){if(!(f<Y&&h(b=e[f],f,e))===D)if(D=!D)y=f,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),R=f-1;R>=y;--R)n.point(z[R],P[R]);n.lineEnd(),n.areaEnd()}D&&(z[f]=+t(b,f,e),P[f]=+o(b,f,e),n.point(c?+c(b,f,e):z[f],l?+l(b,f,e):P[f]))}if(v)return n=null,v+""||null}function C(){return Vt().defined(h).curve(i).context(m)}return a.x=function(e){return arguments.length?(t=typeof e=="function"?e:A(+e),c=null,a):t},a.x0=function(e){return arguments.length?(t=typeof e=="function"?e:A(+e),a):t},a.x1=function(e){return arguments.length?(c=e==null?null:typeof e=="function"?e:A(+e),a):c},a.y=function(e){return arguments.length?(o=typeof e=="function"?e:A(+e),l=null,a):o},a.y0=function(e){return arguments.length?(o=typeof e=="function"?e:A(+e),a):o},a.y1=function(e){return arguments.length?(l=e==null?null:typeof e=="function"?e:A(+e),a):l},a.lineX0=a.lineY0=function(){return C().x(t).y(o)},a.lineY1=function(){return C().x(t).y(l)},a.lineX1=function(){return C().x(c).y(o)},a.defined=function(e){return arguments.length?(h=typeof e=="function"?e:A(!!e),a):h},a.curve=function(e){return arguments.length?(i=e,m!=null&&(n=i(m)),a):i},a.context=function(e){return arguments.length?(e==null?m=n=null:n=i(m=e),a):m},a}function Jt(t){let o,l,c,h,m,i,n,a,C,e,f,y,R,Y,b,D,v,z,P,L,_,j,B,Z;return{c(){o=zt("div"),l=S("svg"),c=S("g"),h=S("text"),m=at(`Years
      `),n=S("text"),a=at(`Percentage
      `),e=S("g"),f=S("g"),y=S("g"),R=S("g"),Y=S("path"),b=S("g"),D=S("g"),v=S("g"),z=S("line"),P=S("g"),L=S("g"),_=S("g"),this.h()},l(s){o=Bt(s,"DIV",{id:!0,class:!0,style:!0});var I=F(o);l=X(I,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var Q=F(l);c=X(Q,"g",{id:!0});var V=F(c);h=X(V,"text",{transform:!0,"font-weight":!0});var H=F(h);m=lt(H,`Years
      `),H.forEach(w),n=X(V,"text",{transform:!0,"font-weight":!0});var J=F(n);a=lt(J,`Percentage
      `),J.forEach(w),V.forEach(w),e=X(Q,"g",{id:!0});var U=F(e);f=X(U,"g",{id:!0}),F(f).forEach(w),y=X(U,"g",{id:!0}),F(y).forEach(w),R=X(U,"g",{id:!0});var $=F(R);Y=X($,"path",{id:!0}),F(Y).forEach(w),$.forEach(w),b=X(U,"g",{id:!0});var rt=F(b);rt.forEach(w),D=X(U,"g",{id:!0}),F(D).forEach(w),v=X(U,"g",{id:!0});var q=F(v);z=X(q,"line",{}),F(z).forEach(w),P=X(q,"g",{id:!0}),F(P).forEach(w),L=X(q,"g",{id:!0}),F(L).forEach(w),_=X(q,"g",{id:!0}),F(_).forEach(w),q.forEach(w),U.forEach(w),Q.forEach(w),I.forEach(w),this.h()},h(){d(h,"transform",i="translate("+(t[3].left+t[5]/2-et/2)+`, 
        `+(t[3].top+t[4]+t[6]+t[3].bottom/3)+")"),d(h,"font-weight","700"),d(n,"transform",C="translate("+(t[3].left-t[6]-5)+`, 
        `+(t[3].top+t[4]/2+et/2)+") rotate(-90)"),d(n,"font-weight","700"),d(c,"id","axes-titles"),d(f,"id","x-axis"),d(y,"id","y-axis"),d(Y,"id","individual-area-chart"),d(R,"id","single-area"),d(b,"id","all-area-chart"),d(D,"id","highlight-area"),d(P,"id","hover-overlay-year"),d(L,"id","hover-overlay-rect"),d(_,"id","hover-overlay-text"),d(v,"id","hover-overlay"),d(e,"id","area-chart"),d(l,"class","inline-block absolute top-0 left-0"),d(l,"viewBox",j="0, 0, "+t[0]+", "+t[1]),d(l,"preserveAspectRatio","xMidYMid meet"),d(o,"id","container"),d(o,"class","inline-block relative align-top overflow-hidden"),K(o,"width",t[0]+"px"),K(o,"height",t[1]+"px"),K(o,"top",(t[2]>50?50:t[2]*.9)+"px")},m(s,I){Ot(s,o,I),M(o,l),M(l,c),M(c,h),M(h,m),M(c,n),M(n,a),M(l,e),M(e,f),M(e,y),M(e,R),M(R,Y),M(e,b),M(e,D),M(e,v),M(v,z),M(v,P),M(v,L),M(v,_),B||(Z=[tt(b,"mousemove",t[21]),tt(b,"focus",t[22]),tt(b,"mouseout",t[23]),tt(b,"blur",t[24])],B=!0)},p(s,I){I[0]&120&&i!==(i="translate("+(s[3].left+s[5]/2-et/2)+`, 
        `+(s[3].top+s[4]+s[6]+s[3].bottom/3)+")")&&d(h,"transform",i),I[0]&88&&C!==(C="translate("+(s[3].left-s[6]-5)+`, 
        `+(s[3].top+s[4]/2+et/2)+") rotate(-90)")&&d(n,"transform",C),I[0]&3&&j!==(j="0, 0, "+s[0]+", "+s[1])&&d(l,"viewBox",j),I[0]&1&&K(o,"width",s[0]+"px"),I[0]&2&&K(o,"height",s[1]+"px"),I[0]&4&&K(o,"top",(s[2]>50?50:s[2]*.9)+"px")},i:st,o:st,d(s){s&&w(o),B=!1,Gt(Z)}}}const Kt=50,Wt=10,et=80;function Zt(t,o,l){Yt();let{width:c=0}=o,{height:h=0}=o,{topOffset:m=0}=o;const i={left:50,right:50,top:50,bottom:50};let n,a,C,e,f,y,R,Y=null,b,D=null,v,z=new Array(v),P=[];new Array(5);let L,_,j,B,Z,s=["painter","watercolourist","oilpainter","sculptor","printmaker","draughtsman","muralist","photography","film","illustrator","architect","ink","ceramicist","calligrapher","engraving"],I=Dt().domain(ft(10)).range(Qt);const Q=()=>{let r=0;L=[],_=[];for(var O of s){let x=new Array(v),k=0;for(var u of z){let N=0,nt=U(u);x[k]=0;let it=[];for(var g of nt){it=e.filter(Rt=>Rt.artist===g[0]);for(var G of it)G.medium===O&&(x[k]=x[k]+1),N=N+1}N&&(x[k]=x[k]/N*100),k=k+1}L[r]=x,r=r+1}_={...L};for(var E=0;E<s.length-1;E++)for(var p=0;p<z.length;p++)_[E+1][p]=L[E][p]+L[E+1][p]},V=()=>{T("#individual-area-chart").attr("opacity","0.0");var r=W().domain([0,v]).range([0,a]),O=W().domain([0,100]).range([n,0]);const u=Ht().x(p=>r(p.x-f)+i.left).y1(p=>O(p.y)+i.top).y0(p=>O(p.prev)+i.top).curve(Ut.alpha(.6)).context(null);let g=0;for(var G of s){let p=_[s.length-1-g],x=[];if(g<s.length-1)x=_[s.length-1-g-1];else for(var E=0;E<v;E++)x[E]=0;g=g+1,j=[];for(let N=0;N<z.length;N++){const nt={x:z[N],y:p[N],prev:x[N]};j.push(nt)}let k="area-chart-"+(s.length-g).toString();T("#all-area-chart").append("path").attr("id",k).datum(j).attr("d",u).style("fill",$(g)).attr("opacity","1.0")}},H=r=>{var O=W().domain([0,v]).range([0,a]);W().domain([0,100]).range([n,0]);let u=Math.floor(O.invert(r.offsetX-i.left));r.offsetX>i.left&&r.offsetX<i.left+a&&!Z&&(T("#hover-overlay").attr("opacity","1.0"),T("#hover-overlay").select("line").attr("x1",r.offsetX).attr("x2",r.offsetX).attr("y1",i.top).attr("y2",n+i.top).attr("stroke","black").attr("stroke-width","2"),T("#hover-overlay-rect").selectAll("rect").data(g=>{for(var G of s);return s.filter(p=>{let x=s.indexOf(p),k=0;if(x!==0?k=_[x][u]-_[x-1][u]:k=_[0][u],k)return p}).reverse()}).join("rect").attr("x",g=>r.offsetX<a-200?r.offsetX+B-10:r.offsetX-210).attr("y",(g,G)=>B*G+B/3+i.top).attr("width",200).attr("height",B).attr("rx","10").style("fill","white").style("opacity","0.8"),T("#hover-overlay-text").selectAll("text").data(g=>{for(var G of s);return s.filter(p=>{let x=s.indexOf(p),k=0;if(x!==0?k=_[x][u]-_[x-1][u]:k=_[0][u],k)return p}).reverse()}).join("text").text(g=>{let G="",E=s.indexOf(g),p=0;return E!==0?p=_[E][u]-_[E-1][u]:p=_[0][u],G=G+`${It(".3s")(p)}% `+g.charAt(0).toUpperCase()+g.slice(1),G}).attr("x",g=>r.offsetX<a-200?r.offsetX+B:r.offsetX-200).attr("y",(g,G)=>B*G+B+i.top).attr("fill",(g,G)=>{let E=s.indexOf(g);return $(s.length-E)}).style("text-shadow","1px 0 0 black,0 1px 0 black,-1px 0 0 black,0 -1px 0 black").style("font-family","sansserif").style("font-size","1.2em")),T("#hover-overlay-year").selectAll("text").data([0]).join("text").text(g=>`In year ${u+f}`).attr("x",g=>r.offsetX<a-200?r.offsetX+B:r.offsetX-200).attr("y",g=>i.top-B/3).attr("fill",(g,G)=>"black").style("font-family","sansserif").style("font-size","1.3em")},J=()=>{},U=r=>P.filter(([,u])=>u.length>1?u[0].year<=r&&u[1].year>r:u[0].year<=r),$=r=>r?I(r.toString()):"black",rt=()=>{T("#all-area-chart").selectAll("*").attr("opacity","0.0")},q=()=>{l(19,R=W().domain([f,y]).range([0,a])),Y=Nt(R).tickFormat(r=>Number(r)%Wt===0?String(r):"").ticks((y-f)/Kt),T("#x-axis").attr("transform",`translate(${i.left}, ${n+i.top})`).call(Y),l(20,b=W().domain([0,100]).range([n,0])),D=Tt(b),T("#y-axis").attr("transform",`translate(${i.left}, ${i.top})`).call(D)},pt=r=>{console.log("Chord medium was highlighted on chord: ",r)},vt=()=>{console.log("Chord medium is no longer highlighted on chord.")},_t=(r,O)=>{console.log("Chord ribbon was highlighted on chord for medium: ",r," and century: ",O)},yt=()=>{console.log("That ribbon is no longer highlighted...")},bt=r=>{console.log("Chord says to zoom to this century: ",r),f=+r,y=+r+100,ot(y,f),rt(),q(),Q(),V()},xt=r=>{console.log("User highlighted button for century: ",r)},wt=()=>{console.log("User is no longer highlighting century button...")},ot=(r,O)=>{v=r-O,z=[];for(let u=0;u<v;u++)z[u]=O+u},Mt=(r,O)=>{l(17,C=r),l(18,e=O),l(5,a=c*.8),l(4,n=h*.7),l(3,i.top=h*.05,i),l(3,i.bottom=h*.25,i),l(3,i.left=c*.15,i),l(3,i.right=c*.05,i),P=qt(C,u=>u.artist),ft(s.length).reverse(),f=+Lt(r,u=>u.year),y=+Pt(r,u=>u.year),f=1400,ot(y,f),q(),Q(),V()},At=r=>H(r),Et=r=>H(r),kt=r=>J(),Ft=r=>J();return t.$$set=r=>{"width"in r&&l(0,c=r.width),"height"in r&&l(1,h=r.height),"topOffset"in r&&l(2,m=r.topOffset)},t.$$.update=()=>{t.$$.dirty[0]&131072,t.$$.dirty[0]&262144,t.$$.dirty[0]&524288,t.$$.dirty[0]&1048576},l(4,n=0),l(5,a=0),f=0,y=2100,L=[],_=[],j=[],l(6,B=30),Z=!1,[c,h,m,i,n,a,B,H,J,pt,vt,_t,yt,bt,xt,wt,Mt,C,e,R,b,At,Et,kt,Ft]}class fe extends St{constructor(o){super(),Xt(this,o,Zt,Jt,Ct,{width:0,height:1,topOffset:2,chordMedGroupFocus:9,chordMedGroupReFocus:10,chordMedRibbonFocus:11,chordMedRibbonReFocus:12,chordMedButtonClick:13,chordMedButtonFocus:14,chordMedButtonReFocus:15,Initialize:16},null,[-1,-1])}get chordMedGroupFocus(){return this.$$.ctx[9]}get chordMedGroupReFocus(){return this.$$.ctx[10]}get chordMedRibbonFocus(){return this.$$.ctx[11]}get chordMedRibbonReFocus(){return this.$$.ctx[12]}get chordMedButtonClick(){return this.$$.ctx[13]}get chordMedButtonFocus(){return this.$$.ctx[14]}get chordMedButtonReFocus(){return this.$$.ctx[15]}get Initialize(){return this.$$.ctx[16]}}export{fe as A};
