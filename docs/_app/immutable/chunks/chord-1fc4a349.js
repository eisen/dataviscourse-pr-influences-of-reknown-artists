import{S as Bt,i as Et,s as Lt,k as Nt,P as wt,l as qt,m as Mt,Q as Tt,h as ft,n as et,p as pt,b as Ft,F as _t,A as kt,R as Vt,O as Wt}from"./index-8d2061e5.js";import{r as Qt}from"./config-89433de9.js";import{C as Ut}from"./helpers-f23ddd8b.js";import{o as Ct}from"./ordinal-ceb38b17.js";import{r as Gt}from"./init-08c38208.js";import{s as E}from"./selectAll-00de10d0.js";import{a as St,c as ut,s as J,h as Dt,p as jt,e as z,t as Yt,b as ht,m as At,d as Ot,f as C,i as zt,j as Jt,k as Kt,g as Ht}from"./math-391f3f26.js";import{c as ot}from"./constant-b8884f20.js";import{s as yt}from"./select-1041df8a.js";function Xt(o){return o.innerRadius}function Zt(o){return o.outerRadius}function $t(o){return o.startAngle}function te(o){return o.endAngle}function ee(o){return o&&o.padAngle}function re(o,f,y,s,m,R,p,n){var c=y-o,e=s-f,I=p-m,u=n-R,l=u*c-I*e;if(!(l*l<z))return l=(I*(f-R)-u*(o-m))/l,[o+l*c,f+l*e]}function mt(o,f,y,s,m,R,p){var n=o-y,c=f-s,e=(p?R:-R)/ht(n*n+c*c),I=e*c,u=-e*n,l=o+I,A=f+u,x=y+I,S=s+u,b=(l+x)/2,W=(A+S)/2,M=x-l,P=S-A,T=M*M+P*P,L=m-R,N=l*S-x*A,Q=(P<0?-1:1)*ht(Kt(0,L*L*T-N*N)),U=(N*P-M*Q)/T,D=(-N*M-P*Q)/T,H=(N*P+M*Q)/T,j=(-N*M+P*Q)/T,a=U-b,g=D-W,K=H-b,X=j-W;return a*a+g*g>K*K+X*X&&(U=H,D=j),{cx:U,cy:D,x01:-I,y01:-u,x11:U*(m/L-1),y11:D*(m/L-1)}}function ne(){var o=Xt,f=Zt,y=ot(0),s=null,m=$t,R=te,p=ee,n=null;function c(){var e,I,u=+o.apply(this,arguments),l=+f.apply(this,arguments),A=m.apply(this,arguments)-Dt,x=R.apply(this,arguments)-Dt,S=Ot(x-A),b=x>A;if(n||(n=e=jt()),l<u&&(I=l,l=u,u=I),!(l>z))n.moveTo(0,0);else if(S>Yt-z)n.moveTo(l*ut(A),l*J(A)),n.arc(0,0,l,A,x,!b),u>z&&(n.moveTo(u*ut(x),u*J(x)),n.arc(0,0,u,x,A,b));else{var W=A,M=x,P=A,T=x,L=S,N=S,Q=p.apply(this,arguments)/2,U=Q>z&&(s?+s.apply(this,arguments):ht(u*u+l*l)),D=At(Ot(l-u)/2,+y.apply(this,arguments)),H=D,j=D,a,g;if(U>z){var K=zt(U/u*J(Q)),X=zt(U/l*J(Q));(L-=K*2)>z?(K*=b?1:-1,P+=K,T-=K):(L=0,P=T=(A+x)/2),(N-=X*2)>z?(X*=b?1:-1,W+=X,M-=X):(N=0,W=M=(A+x)/2)}var nt=l*ut(W),i=l*J(W),w=u*ut(T),h=u*J(T);if(D>z){var v=l*ut(M),d=l*J(M),O=u*ut(P),Z=u*J(P),G;if(S<St&&(G=re(nt,i,O,Z,v,d,w,h))){var st=nt-G[0],ct=i-G[1],t=v-G[0],r=d-G[1],_=1/J(Jt((st*t+ct*r)/(ht(st*st+ct*ct)*ht(t*t+r*r)))/2),$=ht(G[0]*G[0]+G[1]*G[1]);H=At(D,(u-$)/(_-1)),j=At(D,(l-$)/(_+1))}}N>z?j>z?(a=mt(O,Z,nt,i,l,j,b),g=mt(v,d,w,h,l,j,b),n.moveTo(a.cx+a.x01,a.cy+a.y01),j<D?n.arc(a.cx,a.cy,j,C(a.y01,a.x01),C(g.y01,g.x01),!b):(n.arc(a.cx,a.cy,j,C(a.y01,a.x01),C(a.y11,a.x11),!b),n.arc(0,0,l,C(a.cy+a.y11,a.cx+a.x11),C(g.cy+g.y11,g.cx+g.x11),!b),n.arc(g.cx,g.cy,j,C(g.y11,g.x11),C(g.y01,g.x01),!b))):(n.moveTo(nt,i),n.arc(0,0,l,W,M,!b)):n.moveTo(nt,i),!(u>z)||!(L>z)?n.lineTo(w,h):H>z?(a=mt(w,h,v,d,u,-H,b),g=mt(nt,i,O,Z,u,-H,b),n.lineTo(a.cx+a.x01,a.cy+a.y01),H<D?n.arc(a.cx,a.cy,H,C(a.y01,a.x01),C(g.y01,g.x01),!b):(n.arc(a.cx,a.cy,H,C(a.y01,a.x01),C(a.y11,a.x11),!b),n.arc(0,0,u,C(a.cy+a.y11,a.cx+a.x11),C(g.cy+g.y11,g.cx+g.x11),b),n.arc(g.cx,g.cy,H,C(g.y11,g.x11),C(g.y01,g.x01),!b))):n.arc(0,0,u,T,P,b)}if(n.closePath(),e)return n=null,e+""||null}return c.centroid=function(){var e=(+o.apply(this,arguments)+ +f.apply(this,arguments))/2,I=(+m.apply(this,arguments)+ +R.apply(this,arguments))/2-St/2;return[ut(I)*e,J(I)*e]},c.innerRadius=function(e){return arguments.length?(o=typeof e=="function"?e:ot(+e),c):o},c.outerRadius=function(e){return arguments.length?(f=typeof e=="function"?e:ot(+e),c):f},c.cornerRadius=function(e){return arguments.length?(y=typeof e=="function"?e:ot(+e),c):y},c.padRadius=function(e){return arguments.length?(s=e==null?null:typeof e=="function"?e:ot(+e),c):s},c.startAngle=function(e){return arguments.length?(m=typeof e=="function"?e:ot(+e),c):m},c.endAngle=function(e){return arguments.length?(R=typeof e=="function"?e:ot(+e),c):R},c.padAngle=function(e){return arguments.length?(p=typeof e=="function"?e:ot(+e),c):p},c.context=function(e){return arguments.length?(n=e==null?null:e,c):n},c}function ae(o){let f,y,s,m,R;return{c(){f=Nt("div"),y=wt("svg"),s=wt("g"),this.h()},l(p){f=qt(p,"DIV",{id:!0,class:!0,style:!0});var n=Mt(f);y=Tt(n,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var c=Mt(y);s=Tt(c,"g",{id:!0,transform:!0}),Mt(s).forEach(ft),c.forEach(ft),n.forEach(ft),this.h()},h(){et(s,"id","chordViz"),et(s,"transform",m="translate("+o[0]/2+", "+o[1]/2+")"),et(y,"class","inline-block absolute top-0 left-0"),et(y,"viewBox",R="0, 0, "+o[0]+", "+o[1]),et(y,"preserveAspectRatio","xMidYMid meet"),et(f,"id","container"),et(f,"class","inline-block relative align-top overflow-hidden"),pt(f,"width",o[0]+"px"),pt(f,"height",o[1]+"px")},m(p,n){Ft(p,f,n),_t(f,y),_t(y,s),o[11](s)},p(p,n){n[0]&3&&m!==(m="translate("+p[0]/2+", "+p[1]/2+")")&&et(s,"transform",m),n[0]&3&&R!==(R="0, 0, "+p[0]+", "+p[1])&&et(y,"viewBox",R),n[0]&1&&pt(f,"width",p[0]+"px"),n[0]&2&&pt(f,"height",p[1]+"px")},i:kt,o:kt,d(p){p&&ft(f),o[11](null)}}}const rt=250,bt=450;function ie(o,f,y){let s,m,R,p,n,c;const e=Vt();let{width:I}=f,{height:u}=f,{grouping:l}=f,A,x,S,b=["sculptor","painter","printmaker","draughtsman","photography","film","watercolourist","oilpainter","illustrator","muralist","architect","ink","ceramicist","calligrapher","engraving"],W=["illness","alive","suicide","no-mention","heartattack","heartattack-overdose-probably","natural","accident","murder"],M=["1000","1100","1200","1300","1400","1500","1600","1700","1800","1900"],P=new Array(M.length).fill(!1);b.length,Ct().domain(M).range(Gt(M.length));let T=[],L=Ct().domain(Gt(12)).range(Ut);function N(i){var w,h=m*.9125,v=i.startAngle*180/Math.PI-90,d=i.endAngle*180/Math.PI-90,O=null;O||(O=w=jt()),O.moveTo(h*Math.cos(v*Math.PI/180),h*Math.sin(v*Math.PI/180)),O.arc(0,0,h,v*Math.PI/180,d*Math.PI/180);let Z,G=d>0&&d<90||d<-90&&d>-180?.4:1.1;Z=180-90-(90-(Math.abs(d-v)*G+v));let st=h*Math.sin(Z*Math.PI/180),ct=h*Math.cos(Z*Math.PI/180),t=st/2+Math.abs(d-v)*.1*5,r=-1;d>-90&&d<90?r=Math.abs(d-v)*.1*10:r=-1*(Math.abs(d-v)*.1*10);let _=ct/2+r,$,dt=d>0&&d<90||d<-90&&d>-180?1.1:.4;$=180-90-(90-(d-Math.abs(d-v)*dt));let Rt=h*Math.sin($*Math.PI/180),Pt=h*Math.cos($*Math.PI/180),q=Rt/2+Math.abs(d-v)*.1*5,Y=-1;d>-90&&d<90?Y=Math.abs(d-v)*.05*10:Y=-1*(Math.abs(d-v)*.2*10);let gt=Pt/2+Y,at=[];for(let tt=0;tt<M.length;tt++)at.push(tt*((s*2+.06*s)/M.length)-s*.9125);if(O.quadraticCurveTo(_,t,i.half==0?p/2:-p/2,at[i.vertIdx]),O.quadraticCurveTo(gt,q,h*Math.cos(v*Math.PI/180),h*Math.sin(v*Math.PI/180)),w)return O=null,w+""||null}const Q=(i,w)=>{console.log(w),e("highlight_chord_ribbon",{chordGroup:i,chordIdx:w})},U=i=>{e("restore_chord_ribbon",{chordGroup:i})},D=i=>{e("highlight_chord_group",{chordGroup:i})},H=i=>{e("restore_chord_group",{chordGroup:i})},j=i=>{E(".ribbonPaths").transition().duration(rt).style("opacity",.1),E(".ribbonPaths_"+i).transition().duration(rt).style("opacity",.95),E(".arcPaths").transition().duration(rt).style("opacity",.4),E("#arc_"+i).transition().duration(rt).style("opacity",1)},a=i=>{console.log(i),E(".ribbonPaths").transition().duration(bt).style("opacity",.5),E(".arcPaths").transition().duration(bt).style("opacity",1)},g=(i,w)=>{console.log("number: ",w),E(".ribbonPaths").transition().duration(rt).style("opacity",.1),E(".ribbonPaths_"+i).transition().duration(rt).style("opacity",.5),E("#r_"+i+"_"+w).transition().duration(rt).style("opacity",.95),E(".arcPaths").transition().duration(rt).style("opacity",.4),E("#arc_"+i).transition().duration(rt).style("opacity",1)},K=i=>{E(".ribbonPaths").transition().duration(bt).style("opacity",.5),E(".arcPaths").transition().duration(bt).style("opacity",1)},X=(i,w)=>{if(i&&w){l=="Medium"?T=b:T=W;let h=[];for(let t=0;t<T.length;t++)h.push({slice:T[t],groups:new Array(M.length).fill(0)});S=Ht(w,t=>t.artist),x=Ht(i,t=>t.artist);let v=[],d=!1;for(let t=0;t<x.length;t++){d=!1;for(let r=0;r<S.length;r++)if(S[r][0]==x[t][0]){v=S[r][1],d=!0;break}if(d){for(let r=0;r<v.length;r++)for(let _=0;_<h.length;_++)if(l=="Medium"){if(h[_].slice==v[r].medium){h[_].groups[Math.floor(Number(x[t][1][0].year)/100)-10]+=1,P[Math.floor(Number(x[t][1][0].year)/100)-10]=!0;break}}else if(h[_].slice==v[r].death_type){h[_].groups[Math.floor(Number(x[t][1][0].year)/100)-10]+=1,P[Math.floor(Number(x[t][1][0].year)/100)-10]=!0;break}}}console.log(P);let O=0;for(let t=0;t<h.length;t++)for(let r=0;r<h[t].groups.length;r++)O+=h[t].groups[r];let Z=ne().innerRadius(m*.925).outerRadius(m).cornerRadius(3);yt(A).datum(function(t,r){h.sort(function(k,V){let B=0,it=0;for(let lt=0;lt<k.groups.length;lt++)B+=k.groups[lt];for(let lt=0;lt<V.groups.length;lt++)it+=V.groups[lt];return B>it?1:it>B?-1:0});let _=[],$=h.length;console.log("alright then let's take a look!"),console.log($);let dt=R*Math.PI/180,q=2*R*Math.PI/180/O,Y=s/270*.02,gt=-1,at=(Math.PI-dt)/2,tt=(Math.PI-dt)/2,It=0,vt=!1,xt=0;console.log("alright lets"),console.log(h);let F=!1;for(let k=0;k<$;k++){gt++,F=!0;for(let V=0;V<h[k].groups.length;V++)if(h[k].groups[V]>0){let B=h[k].groups[V];if(It+=q*B,It<R*Math.PI/180)_.push({startAngle:F&&k>0?Y+at:at,endAngle:F&&k>0?Y+q*B+at:q*B+at,vertIdx:V,colorIndex:gt,half:0,cent:V,addLabel:!!F,slice:h[k].slice,defIndex:xt}),at+=F&&k>0?Y+q*B:q*B;else{let it=2*Math.PI;_.push({startAngle:F&&k>0?it-Y-q*B-tt:it-q*B-tt,endAngle:F&&k>0?it-Y-tt:it-tt,vertIdx:V,colorIndex:gt,half:1,cent:V,addLabel:!!(F||!vt),slice:h[k].slice,defIndex:xt}),vt||(vt=!0),tt+=F&&k>0?Y+q*B:q*B}F&&(F=!1),xt++}}return console.log("WOah here we are!"),console.log(_),_}),yt(A).append("g").attr("class","ribbons").selectAll("path").data(t=>t).enter().append("path").attr("d",N).style("fill",function(t){return L(t.colorIndex)}).style("stroke",(t,r)=>Qt(L(t.colorIndex)).darker()).style("stroke-width",1).attr("id",(t,r)=>"r_"+t.slice+"_"+r).attr("class",function(t,r){return"ribbonPaths_"+t.slice}).classed("ribbonPaths",!0).style("opacity",.5).on("mouseover",function(t,r){Q(r.slice,r.defIndex)}).on("mouseout",(t,r)=>U(r.slice));let G=yt(A).append("g").attr("class","groups").selectAll("g").data(t=>t).enter().append("g");G.append("path").style("fill",function(t,r){return L(t.colorIndex)}).style("stroke","white").attr("d",Z).attr("id",(t,r)=>"arc_"+t.slice).classed("arcPaths",!0).on("mouseover",(t,r)=>D(r.slice)).on("mouseout",(t,r)=>H(r.slice)),G.append("rect").data(M).classed("cursor-pointer",(t,r)=>P[r]).attr("x",-1*p/2).attr("y",(t,r)=>r*((s*2+.05*s)/M.length)-s*.9-.05*s).attr("rx",6).attr("ry",6).attr("width",p).attr("height",.1*s).attr("fill","#00005C").attr("opacity",1);let st="th";G.append("text").data(M).classed("cursor-pointer",(t,r)=>P[r]).classed("cursor-not-allowed",(t,r)=>!P[r]).attr("x",0).attr("y",(t,r)=>r*((s*2+.05*s)/M.length)-s*.88).attr("fill","white").style("text-anchor","middle").style("font-size",n).text(function(t){return String(Number(t)/100+1)+st}),yt(A).append("g").attr("class","groups").append("text").attr("x",0).attr("y",s/270*-270).style("text-anchor","middle").style("font-size",c>20?20:c).text("Distribution of Artists by "+l+" Over Centuries")}else console.error("Unable to load Artist Locations!")};function nt(i){Wt[i?"unshift":"push"](()=>{A=i,y(2,A)})}return o.$$set=i=>{"width"in i&&y(0,I=i.width),"height"in i&&y(1,u=i.height),"grouping"in i&&y(3,l=i.grouping)},o.$$.update=()=>{o.$$.dirty[0]&2&&y(9,s=u*.45>275?275:u*.45),o.$$.dirty[0]&1&&y(10,m=I*.45>390?390:I*.45),o.$$.dirty[0]&512&&(R=s/270*90-10),o.$$.dirty[0]&1024&&(p=m/370*120),o.$$.dirty[0]&1539&&(n=u<=I?s/270*15:m/370*15),o.$$.dirty[0]&1539&&(c=u<=I?s/170*20:m/270*20)},x=[],S=[],[I,u,A,l,j,a,g,K,X,s,m,nt]}class pe extends Bt{constructor(f){super(),Et(this,f,ie,ae,Lt,{width:0,height:1,grouping:3,HighlightGrouping:4,RestoreGrouping:5,HighlightRibbon:6,RestoreRibbon:7,Initialize:8},null,[-1,-1])}get HighlightGrouping(){return this.$$.ctx[4]}get RestoreGrouping(){return this.$$.ctx[5]}get HighlightRibbon(){return this.$$.ctx[6]}get RestoreRibbon(){return this.$$.ctx[7]}get Initialize(){return this.$$.ctx[8]}}export{pe as C};
