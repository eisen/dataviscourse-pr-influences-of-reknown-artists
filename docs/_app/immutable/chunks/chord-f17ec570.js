import{S as se,i as le,s as oe,k as ae,K as Ht,l as ce,m as It,L as Dt,h as Ot,n as W,p as _t,b as ue,F as zt,N as fe,A as Yt,U as he,T as de}from"./index-b057db88.js";import{a as j,r as ge}from"./config-331e8422.js";import{s as x}from"./selectAll-237a4934.js";import{g as Et,a as pe}from"./colors-08d4fe23.js";import{o as Jt}from"./ordinal-7966dd64.js";import{r as ye}from"./range-cc563a65.js";import{c as dt}from"./constant-b8884f20.js";import{p as Qt,c as xt,s as ot,h as Xt,e as $,t as xe,a as kt,m as qt,b as Zt,d as Y,f as $t,g as be,i as me}from"./math-4b42103b.js";import{p as ee}from"./path-cc2549ba.js";import{P as te}from"./Paired-3f249ea6.js";function Oe(d){return d.innerRadius}function _e(d){return d.outerRadius}function ke(d){return d.startAngle}function Me(d){return d.endAngle}function Pe(d){return d&&d.padAngle}function ve(d,M,T,k,v,G,q,y){var P=T-d,o=k-M,_=q-v,f=y-G,i=f*P-_*o;if(!(i*i<$))return i=(_*(M-G)-f*(d-v))/i,[d+i*P,M+i*o]}function Lt(d,M,T,k,v,G,q){var y=d-T,P=M-k,o=(q?G:-G)/kt(y*y+P*P),_=o*P,f=-o*y,i=d+_,z=M+f,H=T+_,E=k+f,I=(i+H)/2,lt=(z+E)/2,Q=H-i,a=E-z,s=Q*Q+a*a,et=v-G,N=i*E-H*z,m=(a<0?-1:1)*kt(me(0,et*et*s-N*N)),g=(N*a-Q*m)/s,h=(-N*Q-a*m)/s,r=(N*a+Q*m)/s,D=(-N*Q+a*m)/s,p=g-I,R=h-lt,at=r-I,ct=D-lt;return p*p+R*R>at*at+ct*ct&&(g=r,h=D),{cx:g,cy:h,x01:-_,y01:-f,x11:g*(v/et-1),y11:h*(v/et-1)}}function we(){var d=Oe,M=_e,T=dt(0),k=null,v=ke,G=Me,q=Pe,y=null;function P(){var o,_,f=+d.apply(this,arguments),i=+M.apply(this,arguments),z=v.apply(this,arguments)-Xt,H=G.apply(this,arguments)-Xt,E=Zt(H-z),I=H>z;if(y||(y=o=ee()),i<f&&(_=i,i=f,f=_),!(i>$))y.moveTo(0,0);else if(E>xe-$)y.moveTo(i*xt(z),i*ot(z)),y.arc(0,0,i,z,H,!I),f>$&&(y.moveTo(f*xt(H),f*ot(H)),y.arc(0,0,f,H,z,I));else{var lt=z,Q=H,a=z,s=H,et=E,N=E,m=q.apply(this,arguments)/2,g=m>$&&(k?+k.apply(this,arguments):kt(f*f+i*i)),h=qt(Zt(i-f)/2,+T.apply(this,arguments)),r=h,D=h,p,R;if(g>$){var at=$t(g/f*ot(m)),ct=$t(g/i*ot(m));(et-=at*2)>$?(at*=I?1:-1,a+=at,s-=at):(et=0,a=s=(z+H)/2),(N-=ct*2)>$?(ct*=I?1:-1,lt+=ct,Q-=ct):(N=0,lt=Q=(z+H)/2)}var ft=i*xt(lt),it=i*ot(lt),ut=f*xt(s),bt=f*ot(s);if(h>$){var mt=i*xt(Q),gt=i*ot(Q),Mt=f*xt(a),Pt=f*ot(a),nt;if(E<Qt&&(nt=ve(ft,it,Mt,Pt,mt,gt,ut,bt))){var vt=ft-nt[0],wt=it-nt[1],Ct=mt-nt[0],Rt=gt-nt[1],Gt=1/ot(be((vt*Ct+wt*Rt)/(kt(vt*vt+wt*wt)*kt(Ct*Ct+Rt*Rt)))/2),Nt=kt(nt[0]*nt[0]+nt[1]*nt[1]);r=qt(h,(f-Nt)/(Gt-1)),D=qt(h,(i-Nt)/(Gt+1))}}N>$?D>$?(p=Lt(Mt,Pt,ft,it,i,D,I),R=Lt(mt,gt,ut,bt,i,D,I),y.moveTo(p.cx+p.x01,p.cy+p.y01),D<h?y.arc(p.cx,p.cy,D,Y(p.y01,p.x01),Y(R.y01,R.x01),!I):(y.arc(p.cx,p.cy,D,Y(p.y01,p.x01),Y(p.y11,p.x11),!I),y.arc(0,0,i,Y(p.cy+p.y11,p.cx+p.x11),Y(R.cy+R.y11,R.cx+R.x11),!I),y.arc(R.cx,R.cy,D,Y(R.y11,R.x11),Y(R.y01,R.x01),!I))):(y.moveTo(ft,it),y.arc(0,0,i,lt,Q,!I)):y.moveTo(ft,it),!(f>$)||!(et>$)?y.lineTo(ut,bt):r>$?(p=Lt(ut,bt,mt,gt,f,-r,I),R=Lt(ft,it,Mt,Pt,f,-r,I),y.lineTo(p.cx+p.x01,p.cy+p.y01),r<h?y.arc(p.cx,p.cy,r,Y(p.y01,p.x01),Y(R.y01,R.x01),!I):(y.arc(p.cx,p.cy,r,Y(p.y01,p.x01),Y(p.y11,p.x11),!I),y.arc(0,0,f,Y(p.cy+p.y11,p.cx+p.x11),Y(R.cy+R.y11,R.cx+R.x11),I),y.arc(R.cx,R.cy,r,Y(R.y11,R.x11),Y(R.y01,R.x01),!I))):y.arc(0,0,f,s,a,I)}if(y.closePath(),o)return y=null,o+""||null}return P.centroid=function(){var o=(+d.apply(this,arguments)+ +M.apply(this,arguments))/2,_=(+v.apply(this,arguments)+ +G.apply(this,arguments))/2-Qt/2;return[xt(_)*o,ot(_)*o]},P.innerRadius=function(o){return arguments.length?(d=typeof o=="function"?o:dt(+o),P):d},P.outerRadius=function(o){return arguments.length?(M=typeof o=="function"?o:dt(+o),P):M},P.cornerRadius=function(o){return arguments.length?(T=typeof o=="function"?o:dt(+o),P):T},P.padRadius=function(o){return arguments.length?(k=o==null?null:typeof o=="function"?o:dt(+o),P):k},P.startAngle=function(o){return arguments.length?(v=typeof o=="function"?o:dt(+o),P):v},P.endAngle=function(o){return arguments.length?(G=typeof o=="function"?o:dt(+o),P):G},P.padAngle=function(o){return arguments.length?(q=typeof o=="function"?o:dt(+o),P):q},P.context=function(o){return arguments.length?(y=o==null?null:o,P):y},P}function Ce(d){let M,T,k,v,G,q,y,P,o;return{c(){M=ae("div"),T=Ht("svg"),k=Ht("g"),v=Ht("rect"),G=Ht("g"),this.h()},l(_){M=ce(_,"DIV",{id:!0,class:!0,style:!0});var f=It(M);T=Dt(f,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var i=It(T);k=Dt(i,"g",{});var z=It(k);v=Dt(z,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),It(v).forEach(Ot),z.forEach(Ot),G=Dt(i,"g",{id:!0,transform:!0}),It(G).forEach(Ot),i.forEach(Ot),f.forEach(Ot),this.h()},h(){W(v,"x","0"),W(v,"y","0"),W(v,"width",d[0]),W(v,"height",d[1]),W(v,"fill","transparent"),W(G,"id","chordViz"),W(G,"transform",q="translate("+d[0]/2+", "+d[1]/2+")"),W(T,"class","inline-block absolute top-0 left-0"),W(T,"viewBox",y="0, 0, "+d[0]+", "+d[1]),W(T,"preserveAspectRatio","xMidYMid meet"),W(M,"id","container"),W(M,"class","inline-block relative align-top overflow-hidden"),_t(M,"width",d[0]+"px"),_t(M,"height",d[1]+"px"),_t(M,"top",(d[2]>50?50:d[2]*.9)+"px")},m(_,f){ue(_,M,f),zt(M,T),zt(T,k),zt(k,v),zt(T,G),d[19](G),P||(o=fe(k,"click",d[18]),P=!0)},p(_,f){f[0]&1&&W(v,"width",_[0]),f[0]&2&&W(v,"height",_[1]),f[0]&3&&q!==(q="translate("+_[0]/2+", "+_[1]/2+")")&&W(G,"transform",q),f[0]&3&&y!==(y="0, 0, "+_[0]+", "+_[1])&&W(T,"viewBox",y),f[0]&1&&_t(M,"width",_[0]+"px"),f[0]&2&&_t(M,"height",_[1]+"px"),f[0]&4&&_t(M,"top",(_[2]>50?50:_[2]*.9)+"px")},i:Yt,o:Yt,d(_){_&&Ot(M),d[19](null),P=!1,o()}}}let C=250;const Z=250,st=450;function Re(d,M,T){let k,v,G,q,y,P;const o=he();let{width:_}=M,{height:f}=M,{grouping:i}=M,{topOffset:z}=M,H,E,I,lt=["1400","1500","1600","1700","1800","1900","2000"],Q=["1300","1400","1500","1600","1700","1800","1900","2000"],a=[],s=[],et,N,m="",g=[],h=[],r=[],D;function p(l){var O,S=v*.9125,A=l.startAngle*180/Math.PI-90,e=l.endAngle*180/Math.PI-90,c=null;c||(c=O=ee()),c.moveTo(S*Math.cos(A*Math.PI/180),S*Math.sin(A*Math.PI/180)),c.arc(0,0,S,A*Math.PI/180,e*Math.PI/180);let F,St=e>0&&e<90||e<-90&&e>-180?.4:1.1;F=180-90-(90-(Math.abs(e-A)*St+A));let At=S*Math.sin(F*Math.PI/180),Ut=S*Math.cos(F*Math.PI/180),Vt=At/2+Math.abs(e-A)*.1*5,n=-1;e>-90&&e<90?n=Math.abs(e-A)*.1*10:n=-1*(Math.abs(e-A)*.1*10);let t=Ut/2+n,b,V=e>0&&e<90||e<-90&&e>-180?1.1:.4;b=180-90-(90-(e-Math.abs(e-A)*V));let u=S*Math.sin(b*Math.PI/180),w=S*Math.cos(b*Math.PI/180),U=u/2+Math.abs(e-A)*.1*5,B=-1;e>-90&&e<90?B=Math.abs(e-A)*.05*10:B=-1*(Math.abs(e-A)*.2*10);let rt=w/2+B,pt=[];for(let X=0;X<s.length;X++)pt.push(X*((k*2+.06*k)/s.length)-k*.9125);if(c.quadraticCurveTo(t,Vt,l.half==0?q/2:-q/2,pt[l.vertIdx]),c.quadraticCurveTo(rt,U,S*Math.cos(A*Math.PI/180),S*Math.sin(A*Math.PI/180)),O)return c=null,O+""||null}const R=(l,O,S)=>{o("highlight_chord_ribbon",{chordGroup:l,chordIdx:O,chordTime:S})},at=(l,O)=>{o("restore_chord_ribbon",{chordGroup:l,chordIdx:O})},ct=(l,O)=>{o("highlight_chord_group",{chordGroup:l,chordTimeNum:O})},ft=l=>{o("restore_chord_group",{chordGroup:l})},it=(l,O)=>{o("highlight_chord_button",{chordTime:l,chordGroups:O})},ut=l=>{o("restore_chord_button",{chordTime:l})},bt=l=>{o("click_chord_by_arc",{chordGroup:l})},mt=(l,O)=>{o("click_chord_by_ribbon",{chordGroup:l,chordTime:O})},gt=(l,O)=>{o("click_chord_by_century",{chordTime:l,chordGroups:O})},Mt=l=>{if(i=="Death")h[a.indexOf(l)]=!h[a.indexOf(l)];else{for(let O=0;O<h.length;O++)O==a.indexOf(l)?h[O]=!h[O]:h[O]=!1;x(".arcPaths"+i).transition().duration(st).style("stroke",(O,S)=>h[a.indexOf(O.slice)]==!1?"white":"#3C1900").style("stroke-width",1)}},Pt=(l,O)=>{},nt=(l,O)=>{},vt=(l,O)=>{let S=[],A=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let e=0;e<r.length;e++)r[e].groups[A]>0&&S.push(r[e].slice);g[O]?(x(".arcPaths"+i).transition().duration(Z).style("opacity",(e,c)=>S.indexOf(e.slice)==-1&&h[a.indexOf(e.slice)]==!1?.4:1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1),x("#arc_"+l).transition().duration(Z).style("opacity",1).style("stroke","#3C1900"),x(".ribbonPaths"+i).transition().duration(Z).style("opacity",(e,c)=>D(e.cent)==m?.95:.1),x(".ribbonPaths_"+l).transition().duration(Z).style("opacity",(e,c)=>D(e.cent)==m?.95:.5)):(x(".ribbonPaths"+i).transition().duration(Z).style("opacity",(e,c)=>g[e.cent]?.95:.1),x(".ribbonPaths_"+l).transition().duration(Z).style("opacity",.95),x(".arcPaths"+i).transition().duration(Z).style("opacity",(e,c)=>S.indexOf(e.slice)==-1&&h[a.indexOf(e.slice)]==!1?.4:1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1),x("#arc_"+l).transition().duration(Z).style("opacity",1).style("stroke","#3C1900"))},wt=(l,O)=>{let S=[],A=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let e=0;e<r.length;e++)r[e].groups[A]>0&&S.push(r[e].slice);g[O]?(x(".ribbonPaths_"+l).transition().duration(st).style("opacity",(e,c)=>D(e.cent)==m?.95:.1),x(".arcPaths"+i).transition().duration(st).style("opacity",(e,c)=>S.indexOf(e.slice)==-1&&h[a.indexOf(e.slice)]==!1?.4:1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1)):(x(".ribbonPaths"+i).transition().duration(st).style("opacity",function(e,c){return g.includes(!0)?g[e.cent]?.95:.1:.5}),g.includes(!0)?x(".arcPaths"+i).transition().duration(st).style("opacity",(e,c)=>S.indexOf(e.slice)==-1&&h[a.indexOf(e.slice)]==!1?.4:1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1):x(".arcPaths"+i).transition().duration(st).style("opacity",(e,c)=>1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1))},Ct=(l,O)=>{let S=[],A=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let e=0;e<r.length;e++)r[e].groups[A]>0&&S.push(r[e].slice);for(let e=0;e<s.length;e++)m!=s[e]&&x(".ribbonPaths_"+s[e]+"_"+i).transition().duration(Z).style("opacity",.1);for(let e=0;e<a.length;e++)S.indexOf(a[e])==-1&&x("#arc_"+a[e]).transition().duration(Z).style("opacity",(c,F)=>h[a.indexOf(c.slice)]==!1?.4:1).style("stroke",(c,F)=>h[a.indexOf(c.slice)]==!1?"white":"#3C1900").style("stroke-width",1);x(".ribbonPaths_"+l).transition().duration(Z).style("opacity",(e,c)=>D(e.cent)==m?.95:.5),x("#r_"+l+"_"+O).transition().duration(Z).style("opacity",.95),x("#arc_"+l).transition().duration(Z).style("opacity",1).style("stroke",(e,c)=>h[a.indexOf(e.slice)]==!1?"white":"#3C1900").style("stroke-width",1)},Rt=(l,O,S)=>{let A=[],e=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let c=0;c<r.length;c++)r[c].groups[e]>0&&A.push(r[c].slice);if(!g[S])g.includes(!0)?(x(".ribbonPaths"+i).transition().duration(st).style("opacity",(c,F)=>g[c.cent]?.95:.1),x(".arcPaths"+i).transition().duration(st).style("opacity",function(c,F){return A.includes(c.slice)||h[a.indexOf(c.slice)]==!0?1:.4}).style("stroke",(c,F)=>h[a.indexOf(c.slice)]==!1?"white":"#3C1900").style("stroke-width",1)):(x(".ribbonPaths"+i).transition().duration(st).style("opacity",(c,F)=>.5),x(".arcPaths"+i).transition().duration(st).style("opacity",1).style("stroke",(c,F)=>h[a.indexOf(c.slice)]==!1?"white":"#3C1900").style("stroke-width",1));else{x(".ribbonPaths_"+l).transition().duration(st).style("opacity",(c,F)=>D(c.cent)==m?.95:.1);for(let c=0;c<a.length;c++)A.indexOf(a[c])==-1&&x("#arc_"+a[c]).transition().duration(Z).style("opacity",(F,St)=>h[a.indexOf(F.slice)]==!1?.4:1).style("stroke",(F,St)=>h[a.indexOf(F.slice)]==!1?"white":"#3C1900").style("stroke-width",1)}},Gt=(l,O)=>{},Nt=l=>{},Ft=()=>{o("reset_mediums",{})},ie=(l,O)=>{if(l&&O){let S;i=="Medium"?(S=Et(O,n=>n.medium),et=te,s=lt):(S=Et(O,n=>n.death_type),et=te,s=Q);for(let n=0;n<S.length;n++)a.push(S[n][0]);a.sort(pe),I=Et(O,n=>n.artist),E=Et(l,n=>n.artist),g=new Array(s.length).fill(!1),h=new Array(a.length).fill(!1),N=new Array(s.length).fill(!1);let A=Jt().domain(a).range(et);D=Jt().domain(ye(s.length)).range(s);for(let n=0;n<a.length;n++)r.push({slice:a[n],groups:new Array(s.length).fill(0)});let e=[],c=!1;for(let n=0;n<E.length;n++){c=!1;for(let t=0;t<I.length;t++)if(I[t][0]==E[n][0]){e=I[t][1],c=!0;break}if(c){for(let t=0;t<e.length;t++)for(let b=0;b<r.length;b++)if(i=="Medium"){if(r[b].slice==e[t].medium){r[b].groups[s.indexOf(String(Math.floor(Number(E[n][1][1].year)/100)*100))]+=1,N[s.indexOf(String(Math.floor(Number(E[n][1][1].year)/100)*100))]=!0;break}}else if(r[b].slice==e[t].death_type)if(E[n][1].length>1){r[b].groups[s.indexOf(String(Math.floor(Number(E[n][1][1].year)/100)*100))]+=1,N[s.indexOf(String(Math.floor(Number(E[n][1][1].year)/100)*100))]=!0;break}else{r[b].groups[s.indexOf(String(Math.floor(Number(E[n][1][0].year)/100)*100))]+=1,N[s.indexOf(String(Math.floor(Number(E[n][1][0].year)/100)*100))]=!0;break}}}let F=0;for(let n=0;n<r.length;n++)for(let t=0;t<r[n].groups.length;t++)F+=r[n].groups[t];let St=we().innerRadius(v*.925).outerRadius(v).cornerRadius(3);j(H).datum(function(n,t){r.sort(function(L,tt){let K=0,ht=0;for(let yt=0;yt<L.groups.length;yt++)K+=L.groups[yt];for(let yt=0;yt<tt.groups.length;yt++)ht+=tt.groups[yt];return K>ht?1:ht>K?-1:0});let b=[],V=r.length,u=G*Math.PI/180,B=2*G*Math.PI/180/F,rt=k/270*.02,pt=-1,X=(Math.PI-u)/2,Tt=(Math.PI-u)/2,Kt=0,jt=!1,Bt=0,Wt=!1,J=!1;for(let L=0;L<V;L++){pt++,J=!0;for(let tt=0;tt<r[L].groups.length;tt++)if(r[L].groups[tt]>0){let K=r[L].groups[tt];if(Kt+=B*K,Kt<G*Math.PI/180)b.push({startAngle:J&&L>0?rt+X:X,endAngle:J&&L>0?rt+B*K+X:B*K+X,vertIdx:tt,colorIndex:pt,half:0,cent:tt,addLabel:!!J,slice:r[L].slice,defIndex:Bt}),X+=J&&L>0?rt+B*K:B*K;else{let ht=2*Math.PI;Wt==!1?(Wt=!0,b.push({startAngle:J&&L>0?rt+X:X,endAngle:J&&L>0?rt+B*K+X:B*K+X,vertIdx:tt,colorIndex:pt,half:0,cent:tt,addLabel:!!J,slice:r[L].slice,defIndex:Bt}),X+=J&&L>0?rt+B*K:B*K):(b.push({startAngle:J&&L>0?ht-rt-B*K-Tt:ht-B*K-Tt,endAngle:J&&L>0?ht-rt-Tt:ht-Tt,vertIdx:tt,colorIndex:pt,half:1,cent:tt,addLabel:!!(J||!jt),slice:r[L].slice,defIndex:Bt}),jt||(jt=!0),Tt+=J&&L>0?rt+B*K:B*K)}J&&(J=!1),Bt++}}return b}),j(H).append("g").attr("class","ribbons").selectAll("path").data(n=>n).enter().append("path").attr("d",p).style("fill",function(n){return A(n.slice)}).style("stroke",(n,t)=>ge(A(n.slice)).darker()).style("stroke-width",1).attr("id",(n,t)=>"r_"+n.slice+"_"+t).attr("class",function(n,t){return"ribbonPaths_"+n.slice+" ribbonPaths_"+D(n.cent)+"_"+i}).classed("ribbonPaths"+i,!0).style("opacity",.5).on("mouseover",function(n,t){R(t.slice,t.defIndex,D(t.cent)),t.slice=="murder"&&console.log("aha!")}).on("mouseout",(n,t)=>at(t.slice,t.defIndex,t.cent)).on("click",(n,t)=>mt(t.slice,D(t.cent)));let At=j(H).append("g").attr("class","groups").selectAll("g").data(n=>n).enter().append("g");At.append("path").style("fill",function(n,t){return A(n.slice)}).style("stroke","white").attr("d",St).attr("id",(n,t)=>"arc_"+n.slice).attr("class",(n,t)=>"arcPaths_"+D(n.cent)).classed("arcPaths"+i,!0).classed("cursor-pointer",!0).on("mouseover",(n,t)=>ct(t.slice,t.cent)).on("mouseout",(n,t)=>ft(t.slice,t.cent)).on("click",(n,t)=>bt(t.slice)),At.append("rect").data(s).classed("cursor-pointer",(n,t)=>N[t]).classed("cursor-not-allowed",(n,t)=>!N[t]).attr("x",-1*q/2).attr("y",(n,t)=>t*((k*2+.05*k)/s.length)-k*.9-.05*k).attr("rx",6).attr("ry",6).attr("width",q).attr("height",.1*k).attr("fill","#00005C").attr("opacity",1).on("mouseover",function(n,t){let b=[],V=[],u=s.indexOf(String(Math.floor(Number(t)/100)*100));for(let w=0;w<r.length;w++)r[w].groups[u]>0&&b.push(r[w].slice),r[w].groups[s.indexOf(m)]>0&&V.push(r[w].slice);if(g[s.indexOf(t)])m==t&&it(t,b);else{let w=N[s.indexOf(t)];j(this).transition().duration(C).attr("fill",w?"#cf8217":"#00005C"),x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(U,B){return g[U.cent]?.95:.1}),x(".ribbonPaths_"+t+"_"+i).transition().duration(C).style("opacity",.95),x(".arcPaths"+i).transition().duration(C).style("opacity",function(U,B){return b.includes(U.slice)||V.includes(U.slice)||h[a.indexOf(U.slice)]==!0?1:.4}).style("stroke",(U,B)=>h[a.indexOf(U.slice)]==!1?"white":"#3C1900"),it(t,b)}}).on("mouseout",function(n,t){if(g[s.indexOf(t)])m==t&&ut(t);else{j(this).transition().duration(C).attr("fill","#00005C"),x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(u,w){return g.includes(!0)?g[u.cent]?.95:.1:.5});let b=[],V=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let u=0;u<r.length;u++)r[u].groups[V]>0&&b.push(r[u].slice);g.includes(!0)?x(".arcPaths"+i).transition().duration(C).style("opacity",(u,w)=>b.indexOf(u.slice)==-1&&h[a.indexOf(u.slice)]==!1?.4:1).style("stroke",(u,w)=>h[a.indexOf(u.slice)]==!1?"white":"#3C1900"):x(".arcPaths"+i).transition().duration(C).style("opacity",(u,w)=>1).style("stroke",(u,w)=>h[a.indexOf(u.slice)]==!1?"white":"#3C1900"),ut(t)}}).on("click",function(n,t){if(N[s.indexOf(t)]){let b=[],V=s.indexOf(String(Math.floor(Number(t)/100)*100));for(let u=0;u<r.length;u++)r[u].groups[V]>0&&b.push(r[u].slice);gt(t,b),g[s.indexOf(t)]?(j(this).transition().duration(C).attr("fill","#cf8217"),j("#centText_"+t+"_"+i).transition().duration(C).attr("fill","white"),g[s.indexOf(t)]=!1,m=""):(j(this).transition().duration(C).attr("fill","#3C1900"),j("#centText_"+t+"_"+i).transition().duration(C).attr("fill","#cf8217"),g.includes(!0)&&(j("#centRect_"+m+"_"+i).transition().duration(C).attr("fill","#00005C"),j("#centText_"+m+"_"+i).transition().duration(C).attr("fill","white")),m!=""&&(g[s.indexOf(m)]=!1),g[s.indexOf(t)]=!0,m=t,x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(u,w){return g[u.cent]?.95:.1}),x(".arcPaths"+i).transition().duration(C).style("opacity",(u,w)=>b.includes(u.slice)||h[a.indexOf(u.slice)]==!0?1:.4))}}).classed("centRect"+i,!0).attr("id",(n,t)=>"centRect_"+n+"_"+i),At.append("text").data(s).classed("cursor-pointer",(n,t)=>N[t]).classed("cursor-not-allowed",(n,t)=>!N[t]).attr("x",0).attr("y",(n,t)=>t*((k*2+.05*k)/s.length)-k*.88).attr("fill","white").style("text-anchor","middle").style("font-size",y).text(function(n){return String(Number(n)/100+1)}).classed("centText",!0).attr("id",(n,t)=>"centText_"+n+"_"+i).on("mouseover",function(n,t){let b=[],V=[],u=s.indexOf(String(Math.floor(Number(t)/100)*100));for(let w=0;w<r.length;w++)r[w].groups[u]>0&&b.push(r[w].slice),r[w].groups[s.indexOf(m)]>0&&V.push(r[w].slice);if(g[s.indexOf(t)])m==t&&it(t,b);else{let w=N[s.indexOf(t)];j("#centRect_"+t+"_"+i).transition().duration(C).attr("fill",w?"#cf8217":"#00005C"),x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(U,B){return g[U.cent]?.95:.1}),x(".ribbonPaths_"+t+"_"+i).transition().duration(C).style("opacity",.95),x(".arcPaths"+i).transition().duration(C).style("opacity",function(U,B){return b.includes(U.slice)||V.includes(U.slice)||h[a.indexOf(U.slice)]==!0?1:.4}).style("stroke",(U,B)=>h[a.indexOf(U.slice)]==!1?"white":"#3C1900"),it(t,b)}}).on("mouseout",function(n,t){if(g[s.indexOf(t)])m==t&&ut(t);else{j("#centRect_"+t+"_"+i).transition().duration(C).attr("fill","#00005C"),x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(u,w){return g.includes(!0)?g[u.cent]?.95:.1:.5});let b=[],V=s.indexOf(String(Math.floor(Number(m)/100)*100));for(let u=0;u<r.length;u++)r[u].groups[V]>0&&b.push(r[u].slice);g.includes(!0)?x(".arcPaths"+i).transition().duration(C).style("opacity",(u,w)=>b.indexOf(u.slice)==-1&&h[a.indexOf(u.slice)]==!1?.4:1):x(".arcPaths"+i).transition().duration(C).style("opacity",(u,w)=>1),ut(t)}}).on("click",function(n,t){if(N[s.indexOf(t)]){let b=[],V=s.indexOf(String(Math.floor(Number(t)/100)*100));for(let u=0;u<r.length;u++)r[u].groups[V]>0&&b.push(r[u].slice);gt(t,b),g[s.indexOf(t)]?(j(this).transition().duration(C).attr("fill","white"),j("#centRect_"+t+"_"+i).transition().duration(C).attr("fill","#cf8217"),g[s.indexOf(t)]=!1,m=""):(j("#centRect_"+t+"_"+i).transition().duration(C).attr("fill","#3C1900"),j(this).transition().duration(C).attr("fill","#cf8217"),g.includes(!0)&&(j("#centRect_"+m+"_"+i).transition().duration(C).attr("fill","#00005C"),j("#centText_"+m+"_"+i).transition().duration(C).attr("fill","white")),m!=""&&(g[s.indexOf(m)]=!1),g[s.indexOf(t)]=!0,m=t,x(".ribbonPaths"+i).transition().duration(C).style("opacity",function(u,w){return g[u.cent]?.95:.1}),x(".arcPaths"+i).transition().duration(C).style("opacity",function(u,w){return b.includes(u.slice)||h[a.indexOf(u.slice)]==!0?1:.4}))}}).append("tspan").attr("baseline-shift","super").attr("font-size",y*.6).text(function(n,t){return n=="2000"?"ST":"TH"}),j(H).append("g").attr("class","groups").append("text").attr("x",0).attr("y",k/270*-270+5).style("text-anchor","middle").style("font-size",P>20?20:P).attr("font-weight",700).text("Distribution of Artists by "+i+" Over Centuries")}else console.error("Unable to load Artist Locations!")},ne=l=>Ft();function re(l){de[l?"unshift":"push"](()=>{H=l,T(3,H)})}return d.$$set=l=>{"width"in l&&T(0,_=l.width),"height"in l&&T(1,f=l.height),"grouping"in l&&T(5,i=l.grouping),"topOffset"in l&&T(2,z=l.topOffset)},d.$$.update=()=>{d.$$.dirty[0]&2&&T(16,k=f*.45>275?275:f*.45),d.$$.dirty[0]&1&&T(17,v=_*.45>390?390:_*.45),d.$$.dirty[0]&65536&&(G=k/270*85-10),d.$$.dirty[0]&131072&&(q=v/370*120),d.$$.dirty[0]&196611&&(y=f<=_?k/270*15:v/370*15),d.$$.dirty[0]&196611&&(P=f<=_?k/170*20:v/270*20)},E=[],I=[],[_,f,z,H,Ft,i,Mt,Pt,nt,vt,wt,Ct,Rt,Gt,Nt,ie,k,v,ne,re]}class Ee extends se{constructor(M){super(),le(this,M,Re,Ce,oe,{width:0,height:1,grouping:5,topOffset:2,ClickGrouping:6,ClickRibbon:7,ClickButton:8,HighlightGrouping:9,RestoreGrouping:10,HighlightRibbon:11,RestoreRibbon:12,HighlightButton:13,RestoreButton:14,Initialize:15},null,[-1,-1])}get ClickGrouping(){return this.$$.ctx[6]}get ClickRibbon(){return this.$$.ctx[7]}get ClickButton(){return this.$$.ctx[8]}get HighlightGrouping(){return this.$$.ctx[9]}get RestoreGrouping(){return this.$$.ctx[10]}get HighlightRibbon(){return this.$$.ctx[11]}get RestoreRibbon(){return this.$$.ctx[12]}get HighlightButton(){return this.$$.ctx[13]}get RestoreButton(){return this.$$.ctx[14]}get Initialize(){return this.$$.ctx[15]}}export{Ee as C};
