import{S as H,i as N,s as q,k as K,K as G,l as W,m as F,L as b,h as w,n as u,p as k,b as Y,F as A,N as j,A as B,T as J,R as Q}from"./index-57d070b8.js";import{a as v}from"./config-331e8422.js";import{s as m}from"./selectAll-237a4934.js";import{o as E}from"./ordinal-7966dd64.js";import{P as M}from"./Paired-3f249ea6.js";import{g as V,a as X}from"./colors-08d4fe23.js";function Z(h){let r,o,l,d,n,p,i,R;return{c(){r=K("div"),o=G("svg"),l=G("g"),d=G("rect"),n=G("g"),this.h()},l(s){r=W(s,"DIV",{id:!0,class:!0,style:!0});var e=F(r);o=b(e,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0,transform:!0});var _=F(o);l=b(_,"g",{});var x=F(l);d=b(x,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),F(d).forEach(w),x.forEach(w),n=b(_,"g",{id:!0,transform:!0}),F(n).forEach(w),_.forEach(w),e.forEach(w),this.h()},h(){u(d,"x","0"),u(d,"y","0"),u(d,"width",h[0]),u(d,"height",h[1]),u(d,"fill","transparent"),u(n,"id","legendViz"),u(n,"transform","translate(0, 0)"),u(o,"class","inline-block absolute top-0 left-0"),u(o,"viewBox",p="0, 0, "+h[0]+", "+h[1]),u(o,"preserveAspectRatio","xMidYMid meet"),u(o,"transform","translate(0, 0)"),u(r,"id","container"),u(r,"class","inline-block relative align-top overflow-hidden"),k(r,"width",h[0]+"px"),k(r,"height",h[1]+"px"),k(r,"top",h[2]/2+10+"px")},m(s,e){Y(s,r,e),A(r,o),A(o,l),A(l,d),A(o,n),h[12](n),i||(R=j(l,"click",h[11]),i=!0)},p(s,[e]){e&1&&u(d,"width",s[0]),e&2&&u(d,"height",s[1]),e&3&&p!==(p="0, 0, "+s[0]+", "+s[1])&&u(o,"viewBox",p),e&1&&k(r,"width",s[0]+"px"),e&2&&k(r,"height",s[1]+"px"),e&4&&k(r,"top",s[2]/2+10+"px")},i:B,o:B,d(s){s&&w(r),h[12](null),i=!1,R()}}}let f=200;function $(h,r,o){let l;const d=J();let{width:n=0}=r,{height:p=0}=r,{grouping:i}=r,{topOffset:R}=r,s,e=[],_,x,T;const C=a=>{m(".legendaryText_"+i).transition().duration(f).style("opacity",.1),m(".legendaryRect_"+i).transition().duration(f).style("opacity",.1),v("#legendaryText_"+i+"_"+a).transition().duration(f).style("opacity",1),v("#legendaryRect_"+i+"_"+a).transition().duration(f).style("opacity",1)},D=()=>{m(".legendaryText_"+i).transition().duration(f).style("opacity",1),m(".legendaryRect_"+i).transition().duration(f).style("opacity",1)},I=a=>{m(".legendaryText_"+i).transition().duration(f).style("opacity",.1),m(".legendaryRect_"+i).transition().duration(f).style("opacity",.1);for(let y=0;y<a.length;y++)v("#legendaryText_"+i+"_"+a[y]).transition().duration(f).style("opacity",1),v("#legendaryRect_"+i+"_"+a[y]).transition().duration(f).style("opacity",1)},P=()=>{m(".legendaryText_"+i).transition().duration(f).style("opacity",1),m(".legendaryRect_"+i).transition().duration(f).style("opacity",1)},z=()=>{d("reset_mediums",{})},O=a=>{let y;i=="Medium"?(_=E().domain(e).range(M),x=.67,T=.5,y=V(a,t=>t.medium)):(_=E().domain(e).range(M),x=1.1,T=.5,y=V(a,t=>t.death_type));for(let t=0;t<y.length;t++)e.push(y[t][0]);e.sort(X),console.log("alright. here we are again."),v(s).append("rect").attr("rx",4).attr("ry",4).attr("width",n*.9).attr("height",p*.85).attr("fill","none").attr("opacity",1).attr("x",n/20-10).attr("y",5).attr("stroke-width",1).attr("stroke","none"),v(s).append("text").attr("x",n/2).attr("y",l).attr("text-anchor","middle").attr("fill","black").classed("legendBigLabel",!0).style("font-size",l).text(i=="Death"?"Means of Death":"Artistic Medium").style("opacity",1).attr("font-weight",700);let S=v(s).append("g").attr("class","legends").selectAll("g").data(e).enter().append("g");S.append("rect").attr("rx",4).attr("ry",4).attr("width",n*.67/(e.length*4)).attr("height",p*.15).attr("fill",(t,c)=>_(t)).attr("opacity",1).attr("x",(t,c)=>n/20+(7*l*.5+15)+(n*x/e.length+(7*l*.5+15))*(c>=e.length/2?c-e.length/2:c)+(7*l*.5+15)).attr("y",(t,c)=>c>=e.length/2?p*.4+p*.35:p*.4).attr("stroke-width",1).classed("legendaryRect_"+i,!0).attr("stroke","black").attr("id",(t,c)=>"legendaryRect_"+i+"_"+t),S.append("text").attr("x",(t,c)=>n/20+(7*l*.5+15)+(n*x/e.length+(7*l*.5+15))*(c>=e.length/2?c-e.length/2:c)+(7*l*.5+15)+n*.67/(e.length*4)+7).attr("y",(t,c)=>c>=e.length/2?p*.5-l*.6+p*T:p*.65-l*.6).attr("fill","black").style("text-anchor","center").classed("legendaryText_"+i,!0).style("font-size",(t,c)=>t.length>15?l*.7:l*.8).text(function(t,c){let g=t;return t=="illness"?g="Sickness":t=="heartattack"?g="Heart Attack":t=="alive"?g="Still Alive":t=="natural"?g="Natural Causes":t=="no-mention"?g="Cause Unknown":t=="architect"?g="Architecture":t=="calligrapher"?g="Calligraphy":t=="ceramicist"?g="ceramics":t=="draughtsman"?g="Blueprints":t=="illustrator"?g="Illustrations":t=="muralist"?g="Murals":t=="painter"?g="Paintings":t=="printmaker"?g="Prints":t=="sculptor"?g="Sculptures":t=="photography-film"&&(g="Photos & Film"),g.charAt(0).toUpperCase()+g.slice(1)}).style("opacity",1).attr("id",(t,c)=>"legendaryText_"+i+"_"+t)},L=a=>z();function U(a){Q[a?"unshift":"push"](()=>{s=a,o(3,s)})}return h.$$set=a=>{"width"in a&&o(0,n=a.width),"height"in a&&o(1,p=a.height),"grouping"in a&&o(5,i=a.grouping),"topOffset"in a&&o(2,R=a.topOffset)},h.$$.update=()=>{h.$$.dirty&1&&(l=n/370*6<15?15:n/370*5)},[n,p,R,s,z,i,C,D,I,P,O,L,U]}class lt extends H{constructor(r){super(),N(this,r,$,Z,q,{width:0,height:1,grouping:5,topOffset:2,singleGroupingFocus:6,singleGroupingReFocus:7,multipleGroupingsFocus:8,multipleGroupingsReFocus:9,Initialize:10})}get singleGroupingFocus(){return this.$$.ctx[6]}get singleGroupingReFocus(){return this.$$.ctx[7]}get multipleGroupingsFocus(){return this.$$.ctx[8]}get multipleGroupingsReFocus(){return this.$$.ctx[9]}get Initialize(){return this.$$.ctx[10]}}export{lt as L};
