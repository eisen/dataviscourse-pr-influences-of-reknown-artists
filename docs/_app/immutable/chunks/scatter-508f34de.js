import{S as wt,i as Ct,s as Dt,k as Ft,P as X,l as Pt,m as z,Q as E,h as D,n as p,p as N,b as V,F as M,A as rt,H as Rt,R as Bt,q as U,r as J,u as K,O as zt}from"./index-8d2061e5.js";import{a as P}from"./config-331e8422.js";import{A as _,a as Tt,M as it,T as L}from"./helpers-c17ebcc8.js";import{s as x}from"./selectAll-237a4934.js";import{l as Z,f as H,m as nt}from"./linear-4ecbf3f0.js";import{m as S,a as Gt,b as Nt}from"./axis-000f9faf.js";import{g as ot}from"./group-4b12f8cd.js";import{o as St}from"./ordinal-7966dd64.js";function st(s,i,c){const o=s.slice();return o[38]=i[c],o}function lt(s){let i,c=s[38].name+"",o,f,m,b=`Aged ${s[38].age}`,u,n,h,r=`${s[38].finalYear}`,g,v;return{c(){i=X("text"),o=U(c),m=X("text"),u=U(b),h=X("text"),g=U(r),this.h()},l(l){i=E(l,"text",{x:!0,y:!0,id:!0});var d=z(i);o=J(d,c),d.forEach(D),m=E(l,"text",{x:!0,y:!0,id:!0});var O=z(m);u=J(O,b),O.forEach(D),h=E(l,"text",{x:!0,y:!0,id:!0});var B=z(h);g=J(B,r),B.forEach(D),this.h()},h(){p(i,"x","0"),p(i,"y","0"),p(i,"id",f=_(s[38].name)+"-name"),p(m,"x","0"),p(m,"y","0"),p(m,"id",n=_(s[38].name)+"-age"),p(h,"x","0"),p(h,"y","0"),p(h,"id",v=_(s[38].name)+"-year")},m(l,d){V(l,i,d),M(i,o),V(l,m,d),M(m,u),V(l,h,d),M(h,g)},p(l,d){d[0]&16&&c!==(c=l[38].name+"")&&K(o,c),d[0]&16&&f!==(f=_(l[38].name)+"-name")&&p(i,"id",f),d[0]&16&&b!==(b=`Aged ${l[38].age}`)&&K(u,b),d[0]&16&&n!==(n=_(l[38].name)+"-age")&&p(m,"id",n),d[0]&16&&r!==(r=`${l[38].finalYear}`)&&K(g,r),d[0]&16&&v!==(v=_(l[38].name)+"-year")&&p(h,"id",v)},d(l){l&&D(i),l&&D(m),l&&D(h)}}}function Xt(s){let i,c,o,f,m,b=s[4],u=[];for(let n=0;n<b.length;n+=1)u[n]=lt(st(s,b,n));return{c(){i=Ft("div"),c=X("svg"),o=X("g"),f=X("g");for(let n=0;n<u.length;n+=1)u[n].c();this.h()},l(n){i=Pt(n,"DIV",{id:!0,class:!0,style:!0});var h=z(i);c=E(h,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0});var r=z(c);o=E(r,"g",{id:!0,transform:!0}),z(o).forEach(D),f=E(r,"g",{id:!0,opacity:!0});var g=z(f);for(let v=0;v<u.length;v+=1)u[v].l(g);g.forEach(D),r.forEach(D),h.forEach(D),this.h()},h(){p(o,"id","scatterViz"),p(o,"transform","translate(0, 0)"),p(f,"id","hidden-text"),p(f,"opacity","0"),p(c,"class","inline-block absolute top-0 left-0"),p(c,"viewBox",m="0, 0, "+s[0]+", "+s[1]),p(c,"preserveAspectRatio","xMidYMid meet"),p(i,"id","container"),p(i,"class","inline-block relative align-top overflow-hidden"),N(i,"width",s[0]+"px"),N(i,"height",s[1]+"px"),N(i,"top",(s[2]>50?50:s[2]*.9)+"px")},m(n,h){V(n,i,h),M(i,c),M(c,o),s[16](o),M(c,f);for(let r=0;r<u.length;r+=1)u[r].m(f,null)},p(n,h){if(h[0]&16){b=n[4];let r;for(r=0;r<b.length;r+=1){const g=st(n,b,r);u[r]?u[r].p(g,h):(u[r]=lt(g),u[r].c(),u[r].m(f,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=b.length}h[0]&3&&m!==(m="0, 0, "+n[0]+", "+n[1])&&p(c,"viewBox",m),h[0]&1&&N(i,"width",n[0]+"px"),h[0]&2&&N(i,"height",n[1]+"px"),h[0]&4&&N(i,"top",(n[2]>50?50:n[2]*.9)+"px")},i:rt,o:rt,d(n){n&&D(i),s[16](null),Rt(u,n)}}}let R=20;const w=250;let C=20;function ct(s){return new Promise(i=>setTimeout(i,s))}function Et(s,i,c){let o,f,m;const b=Bt();let{width:u=0}=i,{height:n=0}=i,{topOffset:h=0}=i,r,g,v,l,d=["illness","alive","suicide","no-mention","heartattack","heartattack-overdose-probably","natural","accident","murder",""],O=new Array(d.length).fill(!1),B=!1,$="",T,j,tt,I,et,q,F=!1;const ft=a=>{b("highlight_scatter_dots",{deathGroup:a})},ut=()=>{b("restore_scatter_dots",{})},ht=a=>{F?console.log("sorry. the points are busy moving right now..."):(x(".allPoints").transition().duration(w).style("opacity",function(y,k){return"0.15"}),x(".allPoints_"+a).transition().duration(w).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2))},mt=()=>{F?console.log("sorry. the points are busy moving right now..."):x(".allPoints").transition().duration(w).style("opacity","1.0").attr("stroke",(a,y)=>O[d.indexOf(a.typeOfDeath)]?"#3C1900":"none")},dt=(a,y)=>{F?console.log("sorry. the points are busy moving right now..."):(x(".allPoints").transition().duration(w).style("opacity","0.15"),x(".allPoints_"+a+"_"+y).transition().duration(w).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2))},yt=()=>{F?console.log("sorry. the points are busy moving right now..."):x(".allPoints").transition().duration(w).style("opacity","1.0").attr("stroke",(a,y)=>O[d.indexOf(a.typeOfDeath)]?"#3C1900":"none")},pt=(a,y)=>{if(B){x(".allPoints").style("opacity","0.15");for(let k=0;k<y.length;k++)x(".allPoints_"+y[k]+"_"+a).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2)}else{x(".allPoints").style("opacity","0.15");for(let k=0;k<y.length;k++)x(".allPoints_"+y[k]+"_"+a).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2)}},gt=a=>{B?x(".allPoints").style("opacity",function(y,k){return Math.floor(y.finalYear/100)*100==Number($)?"1.0":"0.0"}).attr("stroke",(y,k)=>O[d.indexOf(y.typeOfDeath)]?"#3C1900":"none"):x(".allPoints").style("opacity","1.0").attr("stroke",(y,k)=>O[d.indexOf(y.typeOfDeath)]?"#3C1900":"none")},xt=(a,y)=>{let k=B;if((k=!0)&&a!=$&&(k=!1),k==!1){F=!0,B=!0,$=a;let Y=Z().domain(a=="2000"?[Number(a),Number(a)+22]:[Number(a),Number(a)+100]).range([C,o-C*2]);q.transition().duration(1e3).call(I.scale(Y).ticks(o<=490?8:13).tickFormat(H("d"))),x(".allPoints").transition().duration(1e3).attr("cx",(A,G)=>Y(A.finalYear)+C).style("opacity",0).attr("r",S([o,f])*.015);for(let A=0;A<y.length;A++)x(".allPoints_"+y[A]+"_"+a).transition().duration(1e3).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2).attr("r",S([o,f])*.02).attr("cx",(G,at)=>Y(G.finalYear)+C);ct(2e3).then(()=>F=!1)}else{F=!0,B=!1,$="",q.transition().duration(1e3).call(I.scale(T).ticks(o<=490?8:13).tickFormat(H("d"))),x(".allPoints").transition().duration(1e3).attr("cx",(Y,A)=>T(Y.finalYear)+C).style("opacity",1);for(let Y=0;Y<y.length;Y++)x(".allPoints_"+y[Y]+"_"+a).transition().duration(1e3).style("opacity","1.0").attr("stroke","#3C1900").attr("stroke-width",2).attr("r",S([o,f])*.015).attr("cx",(A,G)=>T(A.finalYear)+C);ct(2e3).then(()=>F=!1)}},_t=a=>{O[d.indexOf(a)]=!O[d.indexOf(a)]},kt=(a,y)=>{if(a&&y){g=ot(a,t=>t.artist),v=ot(y,t=>t.artist);let k,Y,A=!1,G;for(let t=0;t<g.length;t++){A=!1,g[t][1].length>1?(k=Number(g[t][1][1].year)-Number(g[t][1][0].year),Y=Number(g[t][1][1].year)):(k=2022-Number(g[t][1][0].year),Y=2022);for(let e=0;e<v.length;e++)if(v[e][0]==g[t][0]){G=v[e][1][0].death_type,A=!0;break}A&&l.push({name:g[t][0],age:k,finalYear:Y,typeOfDeath:G})}let at=nt(l,function(t){return t.finalYear}),vt=S(l,function(t){return t.finalYear}),Yt=nt(l,function(t){return t.age});S(l,function(t){return t.age}),T=Z().domain([vt,at]).range([C,o-C*2]),j=Z().domain([Yt,0]).range([0,f*.65]),tt=St().domain(d).range(Tt),I=Gt(T),et=Nt(j);let At=P(r).append("g").attr("class","pointGroup").selectAll("g").data(l).enter().append("g").attr("transform",t=>`translate(${T(t.finalYear)+C}, ${j(t.age)+f*.2})`);m>30&&(m=30),At.append("circle").attr("cx",0).attr("cy",0).attr("r",(t,e)=>S([o,f])*.015).attr("fill",(t,e)=>tt(t.typeOfDeath)).attr("class",function(t,e){return"allPoints_"+t.typeOfDeath+" allPoints_"+t.typeOfDeath+"_"+Math.floor(t.finalYear/100)*100}).classed("allPoints",!0).on("mouseover",function(t,e,W=F){W||(x(".allPoints").transition().duration(w).style("opacity",.15).attr("stroke",(Q,Ot)=>O[d.indexOf(Q.typeOfDeath)]?"#3C1900":"none"),P(this).transition().duration(w).style("opacity",1).attr("stroke","#3C1900").attr("stroke-width",2),x(".tempTextT").remove(),P(r).append("rect").classed("tempTextT",!0).attr("rx",6).attr("ry",6).attr("width",()=>it(["#"+_(e.name)+"-name","#"+_(e.name)+"-age","#"+_(e.name)+"-year"],[e.name,`Aged ${e.age}`,`${e.finalYear}`])+R).attr("height",()=>(L("#"+_(e.name)+"-name",e.name)+R*.5)*3).attr("fill","white").attr("stroke","black").attr("opacity",0).attr("x",(e.finalYear>=1880?t.offsetX-o*.1:t.offsetX)-(it(["#"+_(e.name)+"-name","#"+_(e.name)+"-age","#"+_(e.name)+"-year"],[e.name,`Aged ${e.age}`,`${e.finalYear}`])+R)*.5).attr("y",t.offsetY-1.25*R-(L("#"+_(e.name)+"-name",e.name)+R*.5)*3),P(r).append("text").attr("x",e.finalYear>=1880?t.offsetX-o*.1:t.offsetX).attr("y",t.offsetY-(L("#"+_(e.name)+"-name",e.name)+R*.5)*3).attr("fill","black").style("text-anchor","middle").classed("tempTextT",!0).attr("id",()=>_(e.name)+"-name").style("font-size",e.name.length>=15&&e.finalYear>=1880?m*.52:m*.6).text(`${e.name}`).style("opacity",0),P(r).append("text").attr("x",e.finalYear>=1880?t.offsetX-o*.1:t.offsetX).attr("y",t.offsetY+.125*R-(L("#"+_(e.name)+"-name",e.name)+R*.5)*2).attr("fill","black").style("text-anchor","middle").classed("tempTextT",!0).style("font-size",m*.6).attr("id",()=>_(e.name)+"-age").text(`Aged ${e.age}`).style("opacity",0),P(r).append("text").attr("x",e.finalYear>=1880?t.offsetX-o*.1:t.offsetX).attr("y",t.offsetY-(L("#"+_(e.name)+"-name",e.name)+R*.5)).attr("id",()=>_(e.name)+"-year").attr("fill","black").style("text-anchor","middle").classed("tempTextT",!0).style("font-size",m*.6).text(`${e.finalYear}`).style("opacity",0),x(".tempTextT").transition().duration(w).style("opacity",1),ft(e.typeOfDeath))}).on("mouseout",function(t,e,W=F){W||(x(".allPoints").transition().duration(w).style("opacity",1).attr("stroke",(Q,Ot)=>O[d.indexOf(Q.typeOfDeath)]?"#3C1900":"none"),x(".tempTextT").transition().duration(w).style("opacity",0).remove(),ut())}),q=P(r).append("g").classed("axis",!0).attr("transform",`translate(${C},${f*.85})`).call(I.ticks(o<=490?8:13).tickFormat(H("d"))),P(r).append("g").classed("axis",!0).attr("transform",`translate(${C*1.5},${f*.2})`).call(et.ticks(15).tickFormat(H("d"))),P(r).append("text").attr("x",o/2).attr("y",f*.95).attr("fill","black").style("text-anchor","middle").classed("axesBigLabel",!0).style("font-size",m*.65).text("Artists' Ages of Death Plotted Against Latest Years Alive").style("opacity",1)}else console.error("Unable to load Artist Locations!");console.log(l),c(4,l)};function bt(a){zt[a?"unshift":"push"](()=>{r=a,c(3,r)})}return s.$$set=a=>{"width"in a&&c(0,u=a.width),"height"in a&&c(1,n=a.height),"topOffset"in a&&c(2,h=a.topOffset)},s.$$.update=()=>{s.$$.dirty[0]&1&&c(15,o=u),s.$$.dirty[0]&2&&c(14,f=n),s.$$.dirty[0]&49155&&(m=n<=u?f/270*15:o/370*15),s.$$.dirty[0]&32768},g=[],v=[],c(4,l=[]),[u,n,h,r,l,ht,mt,dt,yt,pt,gt,xt,_t,kt,f,o,bt]}class Wt extends wt{constructor(i){super(),Ct(this,i,Et,Xt,Dt,{width:0,height:1,topOffset:2,chordGroupingFocus:5,chordGroupingReFocus:6,chordRibbonFocus:7,chordRibbonReFocus:8,chordButtonFocus:9,chordButtonReFocus:10,chordButtonClick:11,chordArcClick:12,Initialize:13},null,[-1,-1])}get chordGroupingFocus(){return this.$$.ctx[5]}get chordGroupingReFocus(){return this.$$.ctx[6]}get chordRibbonFocus(){return this.$$.ctx[7]}get chordRibbonReFocus(){return this.$$.ctx[8]}get chordButtonFocus(){return this.$$.ctx[9]}get chordButtonReFocus(){return this.$$.ctx[10]}get chordButtonClick(){return this.$$.ctx[11]}get chordArcClick(){return this.$$.ctx[12]}get Initialize(){return this.$$.ctx[13]}}export{Wt as S};
