import{S as B,i as E,s as I,k as L,P as k,l as q,m as R,Q as F,h as x,n as d,p,b as H,F as b,A as G,R as P,O as Q}from"./index-8d2061e5.js";import{a as y}from"./config-331e8422.js";import{C as U,a as Y}from"./helpers-c17ebcc8.js";import{s as h}from"./selectAll-237a4934.js";import{o as T}from"./ordinal-7966dd64.js";function j(c){let i,s,r,l;return{c(){i=L("div"),s=k("svg"),r=k("g"),this.h()},l(e){i=q(e,"DIV",{id:!0,class:!0,style:!0});var t=R(i);s=F(t,"svg",{class:!0,viewBox:!0,preserveAspectRatio:!0,transform:!0});var m=R(s);r=F(m,"g",{id:!0,transform:!0}),R(r).forEach(x),m.forEach(x),t.forEach(x),this.h()},h(){d(r,"id","legendViz"),d(r,"transform","translate(0, 0)"),d(s,"class","inline-block absolute top-0 left-0"),d(s,"viewBox",l="0, 0, "+c[0]+", "+c[1]),d(s,"preserveAspectRatio","xMidYMid meet"),d(s,"transform","translate(0, 0)"),d(i,"id","container"),d(i,"class","inline-block relative align-top overflow-hidden"),p(i,"width",c[0]+"px"),p(i,"height",c[1]+"px"),p(i,"top",c[2]/2+10+"px")},m(e,t){H(e,i,t),b(i,s),b(s,r),c[10](r)},p(e,[t]){t&3&&l!==(l="0, 0, "+e[0]+", "+e[1])&&d(s,"viewBox",l),t&1&&p(i,"width",e[0]+"px"),t&2&&p(i,"height",e[1]+"px"),t&4&&p(i,"top",e[2]/2+10+"px")},i:G,o:G,d(e){e&&x(i),c[10](null)}}}let u=200;function J(c,i,s){let r;P();let{width:l=0}=i,{height:e=0}=i,{grouping:t}=i,{topOffset:m}=i,f,z=["sculptor","painter","printmaker","draughtsman","photography","film","watercolourist","oilpainter","illustrator","muralist","architect","ink","ceramicist","calligrapher","engraving"],A=["illness","alive","suicide","no-mention","heartattack","heartattack-overdose-probably","natural","accident","murder",""],g=[],v,_,w;const S=a=>{h(".legendaryText_"+t).transition().duration(u).style("opacity",.1),h(".legendaryRect_"+t).transition().duration(u).style("opacity",.1),y("#legendaryText_"+t+"_"+a).transition().duration(u).style("opacity",1),y("#legendaryRect_"+t+"_"+a).transition().duration(u).style("opacity",1)},V=()=>{h(".legendaryText_"+t).transition().duration(u).style("opacity",1),h(".legendaryRect_"+t).transition().duration(u).style("opacity",1)},C=a=>{h(".legendaryText_"+t).transition().duration(u).style("opacity",.1),h(".legendaryRect_"+t).transition().duration(u).style("opacity",.1);for(let n=0;n<a.length;n++)y("#legendaryText_"+t+"_"+a[n]).transition().duration(u).style("opacity",1),y("#legendaryRect_"+t+"_"+a[n]).transition().duration(u).style("opacity",1)},D=()=>{h(".legendaryText_"+t).transition().duration(u).style("opacity",1),h(".legendaryRect_"+t).transition().duration(u).style("opacity",1)},M=()=>{t=="Medium"?(g=z,v=T().domain(g).range(U),_=.67,w=.5):(g=A,v=T().domain(g).range(Y),_=1.1,w=.5),console.log("alright. here we are again."),y(f).append("rect").attr("rx",4).attr("ry",4).attr("width",l*.9).attr("height",e*.85).attr("fill","none").attr("opacity",1).attr("x",l/20-10).attr("y",5).attr("stroke-width",1).attr("stroke","none");let a=y(f).append("g").attr("class","legends").selectAll("g").data(g).enter().append("g");a.append("rect").attr("rx",4).attr("ry",4).attr("width",l*.67/(g.length*4)).attr("height",e*.15).attr("fill",(n,o)=>v(n)).attr("opacity",1).attr("x",(n,o)=>l/20+(7*r*.5+15)+(l*_/g.length+(7*r*.5+15))*(o>=g.length/2?o-g.length/2:o)).attr("y",(n,o)=>o>=g.length/2?e*.25+e*.35:e*.25).attr("stroke-width",1).classed("legendaryRect_"+t,!0).attr("stroke","black").attr("id",(n,o)=>"legendaryRect_"+t+"_"+n),a.append("text").attr("x",(n,o)=>l/20+(7*r*.5+15)+(l*_/g.length+(7*r*.5+15))*(o>=g.length/2?o-g.length/2:o)+l*.67/(g.length*4)+7).attr("y",(n,o)=>o>=g.length/2?e*.35-r*.6+e*w:e*.5-r*.6).attr("fill","black").style("text-anchor","center").classed("legendaryText_"+t,!0).style("font-size",(n,o)=>n.length>15?r*.7:r*.8).text((n,o)=>n.charAt(0).toUpperCase()+n.slice(1)).style("opacity",1).attr("id",(n,o)=>"legendaryText_"+t+"_"+n)};function O(a){Q[a?"unshift":"push"](()=>{f=a,s(3,f)})}return c.$$set=a=>{"width"in a&&s(0,l=a.width),"height"in a&&s(1,e=a.height),"grouping"in a&&s(4,t=a.grouping),"topOffset"in a&&s(2,m=a.topOffset)},c.$$.update=()=>{c.$$.dirty&1&&(r=l/370*6<15?15:l/370*5)},[l,e,m,f,t,S,V,C,D,M,O]}class $ extends B{constructor(i){super(),E(this,i,J,j,I,{width:0,height:1,grouping:4,topOffset:2,singleGroupingFocus:5,singleGroupingReFocus:6,multipleGroupingsFocus:7,multipleGroupingsReFocus:8,Initialize:9})}get singleGroupingFocus(){return this.$$.ctx[5]}get singleGroupingReFocus(){return this.$$.ctx[6]}get multipleGroupingsFocus(){return this.$$.ctx[7]}get multipleGroupingsReFocus(){return this.$$.ctx[8]}get Initialize(){return this.$$.ctx[9]}}export{$ as L};
